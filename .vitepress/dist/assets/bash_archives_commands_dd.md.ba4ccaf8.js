import{_ as s,o as a,c as n,Q as o}from"./chunks/framework.681fc4ae.js";const h=JSON.parse('{"title":"dd","description":"","frontmatter":{},"headers":[],"relativePath":"bash/archives/commands/dd.md","filePath":"bash/archives/commands/dd.md"}'),p={name:"bash/archives/commands/dd.md"},l=o(`<h1 id="dd" tabindex="-1">dd <a class="header-anchor" href="#dd" aria-label="Permalink to &quot;dd&quot;">​</a></h1><p><code>dd</code>命令用于复制磁盘或文件系统。</p><h2 id="复制磁盘" tabindex="-1">复制磁盘 <a class="header-anchor" href="#复制磁盘" aria-label="Permalink to &quot;复制磁盘&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=/dev/sda</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of=/dev/sdb</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">if=/dev/sda</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of=/dev/sdb</span></span></code></pre></div><p>上面命令表示将<code>/dev/sda</code>磁盘复制到<code>/dev/sdb</code>设备。参数<code>if</code>表示来源地，<code>of</code>表示目的地。</p><p>除了复制，<code>dd</code>还允许将磁盘做成一个镜像文件。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=/dev/sda</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of=/home/username/sdadisk.img</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">if=/dev/sda</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of=/home/username/sdadisk.img</span></span></code></pre></div><p><code>dd</code>还可以复制单个分区。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=/dev/sda2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of=/home/username/partition2.img</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bs=</span><span style="color:#79B8FF;">4096</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">if=/dev/sda2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of=/home/username/partition2.img</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bs=</span><span style="color:#005CC5;">4096</span></span></code></pre></div><p>上面命令中，参数<code>bs</code>表示单次拷贝的字节数（bytes）。</p><p>要将镜像文件复原，也很简单。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=sdadisk.img</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of=/dev/sdb</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">if=sdadisk.img</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of=/dev/sdb</span></span></code></pre></div><h2 id="清除数据" tabindex="-1">清除数据 <a class="header-anchor" href="#清除数据" aria-label="Permalink to &quot;清除数据&quot;">​</a></h2><p><code>dd</code>也可以用于清除磁盘数据。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 磁盘数据写满 0</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=/dev/zero</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of=/dev/sda1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 磁盘数据写满随机字符</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=/dev/urandom</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of=/dev/sda1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 磁盘数据写满 0</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">if=/dev/zero</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of=/dev/sda1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 磁盘数据写满随机字符</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">if=/dev/urandom</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of=/dev/sda1</span></span></code></pre></div><h2 id="监控进展" tabindex="-1">监控进展 <a class="header-anchor" href="#监控进展" aria-label="Permalink to &quot;监控进展&quot;">​</a></h2><p>磁盘的复制通常需要很久，为了监控进展，可以使用 Pipe Viewer 工具软件。如果没有安装这个软件，可以使用下面的命令安装。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pv</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pv</span></span></code></pre></div><p>然后，来源地和目的地之间插入广告，就可以看到进展了。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=/dev/urandom</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">pv</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of=/dev/sda1</span></span>
<span class="line"><span style="color:#B392F0;">4,14MB</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">:00:05</span><span style="color:#E1E4E8;"> [ </span><span style="color:#79B8FF;">98</span><span style="color:#9ECBFF;">kB/s]</span><span style="color:#E1E4E8;"> [      </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">=</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">                  </span><span style="color:#9ECBFF;">]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">if=/dev/urandom</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">pv</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">dd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of=/dev/sda1</span></span>
<span class="line"><span style="color:#6F42C1;">4,14MB</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">:00:05</span><span style="color:#24292E;"> [ </span><span style="color:#005CC5;">98</span><span style="color:#032F62;">kB/s]</span><span style="color:#24292E;"> [      </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">=</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">                  </span><span style="color:#032F62;">]</span></span></code></pre></div><h2 id="参考链接" tabindex="-1">参考链接 <a class="header-anchor" href="#参考链接" aria-label="Permalink to &quot;参考链接&quot;">​</a></h2><ul><li>David Clinton, <a href="https://opensource.com/article/18/7/how-use-dd-linux" target="_blank" rel="noreferrer">How to use dd in Linux without destroying your disk</a></li></ul>`,22),e=[l];function c(t,r,d,i,y,E){return a(),n("div",null,e)}const v=s(p,[["render",c]]);export{h as __pageData,v as default};
