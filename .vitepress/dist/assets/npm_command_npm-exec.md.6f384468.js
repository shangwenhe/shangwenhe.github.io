import{_ as s,o as a,c as n,Q as p}from"./chunks/framework.681fc4ae.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"npm/command/npm-exec.md","filePath":"npm/command/npm-exec.md"}'),o={name:"npm/command/npm-exec.md"},l=p(`<h2 id="概要" tabindex="-1">概要 <a class="header-anchor" href="#概要" aria-label="Permalink to &quot;概要&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">pk</span><span style="color:#E1E4E8;">g</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">[@</span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">versio</span><span style="color:#E1E4E8;">n</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">]</span><span style="color:#E1E4E8;"> [args...]</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--package=</span><span style="color:#F97583;">&lt;</span><span style="color:#79B8FF;">pkg</span><span style="color:#F97583;">&gt;</span><span style="color:#79B8FF;">[@</span><span style="color:#F97583;">&lt;</span><span style="color:#79B8FF;">version</span><span style="color:#F97583;">&gt;</span><span style="color:#79B8FF;">]</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">cm</span><span style="color:#E1E4E8;">d</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> [args...]</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&lt;cmd&gt; [args...]&#39;</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--package=foo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&lt;cmd&gt; [args...]&#39;</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> [--ws] [-w </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">workspace-name] [args...]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">pk</span><span style="color:#E1E4E8;">g</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">[@</span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">specifie</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">]</span><span style="color:#E1E4E8;"> [args...]</span></span>
<span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">pk</span><span style="color:#E1E4E8;">g</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">[@</span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">specifie</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">]</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">cm</span><span style="color:#E1E4E8;">d</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> [args...]</span></span>
<span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&lt;cmd&gt; [args...]&#39;</span></span>
<span class="line"><span style="color:#B392F0;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">pk</span><span style="color:#E1E4E8;">g</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">[@</span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">specifie</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">]</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&lt;cmd&gt; [args...]&#39;</span></span>
<span class="line"><span style="color:#B392F0;">Run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">without</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--call</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">positional</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">args</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">open</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">interactive</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">subshell</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">alias</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">x,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">npx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">common</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">options:</span></span>
<span class="line"><span style="color:#E1E4E8;">--package</span><span style="color:#F97583;">=&lt;</span><span style="color:#9ECBFF;">pk</span><span style="color:#E1E4E8;">g</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">may</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">be</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">specified</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">multiple</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">times</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#B392F0;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">shorthand</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--package</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">only</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">when</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">executable</span></span>
<span class="line"><span style="color:#B392F0;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">cm</span><span style="color:#E1E4E8;">d</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--call=</span><span style="color:#F97583;">&lt;</span><span style="color:#79B8FF;">cmd</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> (may </span><span style="color:#9ECBFF;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">be</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mixed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">positional</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">arguments</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">pk</span><span style="color:#24292E;">g</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">[@</span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">versio</span><span style="color:#24292E;">n</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">]</span><span style="color:#24292E;"> [args...]</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--package=</span><span style="color:#D73A49;">&lt;</span><span style="color:#005CC5;">pkg</span><span style="color:#D73A49;">&gt;</span><span style="color:#005CC5;">[@</span><span style="color:#D73A49;">&lt;</span><span style="color:#005CC5;">version</span><span style="color:#D73A49;">&gt;</span><span style="color:#005CC5;">]</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">cm</span><span style="color:#24292E;">d</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> [args...]</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&lt;cmd&gt; [args...]&#39;</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--package=foo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&lt;cmd&gt; [args...]&#39;</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> [--ws] [-w </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">workspace-name] [args...]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">pk</span><span style="color:#24292E;">g</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">[@</span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">specifie</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">]</span><span style="color:#24292E;"> [args...]</span></span>
<span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">pk</span><span style="color:#24292E;">g</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">[@</span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">specifie</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">]</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">cm</span><span style="color:#24292E;">d</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> [args...]</span></span>
<span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&lt;cmd&gt; [args...]&#39;</span></span>
<span class="line"><span style="color:#6F42C1;">npx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">pk</span><span style="color:#24292E;">g</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">[@</span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">specifie</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">]</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&lt;cmd&gt; [args...]&#39;</span></span>
<span class="line"><span style="color:#6F42C1;">Run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">without</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--call</span><span style="color:#24292E;"> </span><span style="color:#032F62;">or</span><span style="color:#24292E;"> </span><span style="color:#032F62;">positional</span><span style="color:#24292E;"> </span><span style="color:#032F62;">args</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">open</span><span style="color:#24292E;"> </span><span style="color:#032F62;">interactive</span><span style="color:#24292E;"> </span><span style="color:#032F62;">subshell</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;">alias</span><span style="color:#24292E;">: </span><span style="color:#032F62;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">x,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">npx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">common</span><span style="color:#24292E;"> </span><span style="color:#032F62;">options:</span></span>
<span class="line"><span style="color:#24292E;">--package</span><span style="color:#D73A49;">=&lt;</span><span style="color:#032F62;">pk</span><span style="color:#24292E;">g</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> (</span><span style="color:#6F42C1;">may</span><span style="color:#24292E;"> </span><span style="color:#032F62;">be</span><span style="color:#24292E;"> </span><span style="color:#032F62;">specified</span><span style="color:#24292E;"> </span><span style="color:#032F62;">multiple</span><span style="color:#24292E;"> </span><span style="color:#032F62;">times</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6F42C1;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">shorthand</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--package</span><span style="color:#24292E;"> </span><span style="color:#032F62;">only</span><span style="color:#24292E;"> </span><span style="color:#032F62;">when</span><span style="color:#24292E;"> </span><span style="color:#032F62;">using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">executable</span></span>
<span class="line"><span style="color:#6F42C1;">-c</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">cm</span><span style="color:#24292E;">d</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--call=</span><span style="color:#D73A49;">&lt;</span><span style="color:#005CC5;">cmd</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> (may </span><span style="color:#032F62;">not</span><span style="color:#24292E;"> </span><span style="color:#032F62;">be</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mixed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with</span><span style="color:#24292E;"> </span><span style="color:#032F62;">positional</span><span style="color:#24292E;"> </span><span style="color:#032F62;">arguments</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="描述" tabindex="-1">描述 <a class="header-anchor" href="#描述" aria-label="Permalink to &quot;描述&quot;">​</a></h2><p>此命令允许您从 npm 包（本地安装或远程获取）运行任意命令，其上下文与通过<code>npm run</code>.</p><p>在不使用位置参数或 的情况下运行，这允许您在运行脚本<code>--call</code>的相同 shell 环境中以交互方式运行命令。<code>package.json</code>当标准输入为 TTY 时，CI 环境中不支持交互模式，以防止挂起。</p><p>该选项指定的任何包都<code>--package</code>将在执行的命令中提供<code>PATH</code>，以及任何本地安装的包可执行文件。<code>--package</code>可以多次指定该选项，以便在所有指定的包都可用的环境中执行提供的命令。</p><p>如果本地项目依赖项中不存在任何请求的包，则它们将安装到 npm 缓存中的文件夹中，该文件夹将添加到<code>PATH</code>执行过程中的环境变量中。打印提示（可以通过提供 或 来抑制<code>--yes</code>）<code>--no</code>。</p><p>不带说明符提供的包名称将与本地项目中存在的任何版本相匹配。仅当带有说明符的包名称与本地依赖项具有完全相同的名称和版本时，才会被视为匹配。</p><p>如果未提供<code>-c</code>或<code>--call</code>选项，则使用位置参数来生成命令字符串。如果未<code>--package</code>提供选项，则 npm 将尝试根据以下启发式从作为第一个位置参数提供的包说明符确定可执行文件名称：</p><ul><li><code>bin</code>如果包的字段中有单个条目<code>package.json</code>，或者所有条目都是同一命令的别名，则将使用该命令。</li><li>如果包有多个<code>bin</code>条目，并且其中之一与<code>name</code>字段的无范围部分匹配，则将使用该命令。</li><li>如果这没有导致恰好一个选项（或者因为没有 bin 条目，或者没有一个<code>name</code>与包的条目匹配），则<code>npm exec</code>退出并出现错误。</li></ul><p>要运行指定二进制文件<em>以外的</em>二进制文件，请指定一个或多个<code>--package</code>选项，这将阻止 npm 从第一个命令参数推断包。</p><h2 id="npx-vs-npm-exec" tabindex="-1"><code>npx-vs-npm-exec</code> <a class="header-anchor" href="#npx-vs-npm-exec" aria-label="Permalink to &quot;\`npx-vs-npm-exec\`&quot;">​</a></h2><p>当通过<code>npx</code>二进制文件运行时，所有标志和选项<em>必须</em>在任何位置参数之前设置。当通过 运行时<code>npm exec</code>，双连字符<code>--</code>标志可用于抑制 npm 对应发送到执行命令的开关和选项的解析。</p><p>例如：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ npx foo@latest bar --package=@npmcli/foo</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ npx foo@latest bar --package=@npmcli/foo</span></span></code></pre></div><p>在这种情况下，npm 将解析<code>foo</code>包名称，并运行以下命令：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ foo bar --package=@npmcli/foo</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ foo bar --package=@npmcli/foo</span></span></code></pre></div><p>由于<code>--package</code>选项位于位置参数<em>之后</em>，因此它被视为执行命令的参数。</p><p>相反，由于 npm 的参数解析逻辑，运行此命令是不同的：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ npm exec foo@latest bar --package=@npmcli/foo</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ npm exec foo@latest bar --package=@npmcli/foo</span></span></code></pre></div><p><code>--package</code>在这种情况下，npm 将首先解析选项，解析<code>@npmcli/foo</code>包。然后，它将在该上下文中执行以下命令：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ foo@latest bar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ foo@latest bar</span></span></code></pre></div><p>建议使用双连字符来明确告诉 npm 停止解析命令行选项和开关。因此，以下命令与上面的命令等效<code>npx</code>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ npm exec -- foo@latest bar --package=@npmcli/foo</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ npm exec -- foo@latest bar --package=@npmcli/foo</span></span></code></pre></div><h2 id="configuration" tabindex="-1"><code>configuration</code> <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;\`configuration\`&quot;">​</a></h2><h2 id="package" tabindex="-1"><code>package</code> <a class="header-anchor" href="#package" aria-label="Permalink to &quot;\`package\`&quot;">​</a></h2><ul><li>默认：</li><li>类型：String（可设置多次）</li></ul><p>要安装的包<code>npm exec</code></p><h2 id="call" tabindex="-1"><code>call</code> <a class="header-anchor" href="#call" aria-label="Permalink to &quot;\`call\`&quot;">​</a></h2><ul><li>默认： ””</li><li>类型：字符串</li></ul><p>的可选配套选项<code>npm exec</code>，<code>npx</code>允许指定与已安装的软件包一起运行的自定义命令。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--package</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--package</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">generator-node</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--call</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;yo node&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--package</span><span style="color:#24292E;"> </span><span style="color:#032F62;">yo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--package</span><span style="color:#24292E;"> </span><span style="color:#032F62;">generator-node</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--call</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;yo node&quot;</span></span></code></pre></div><h2 id="workspace" tabindex="-1"><code>workspace</code> <a class="header-anchor" href="#workspace" aria-label="Permalink to &quot;\`workspace\`&quot;">​</a></h2><ul><li>默认：</li><li>类型：String（可设置多次）</li></ul><p>允许在当前项目的已配置工作区上下文中运行命令，同时通过仅运行此配置选项定义的工作区进行过滤。</p><p>配置的有效值为<code>workspace</code>：</p><ul><li>工作区名称</li><li>工作区目录的路径</li><li>父工作区目录的路径（将导致选择所有嵌套工作区）</li></ul><p>当设置该<code>npm init</code>命令时，可以将其设置为尚不存在的工作空间的文件夹，以创建该文件夹并将其设置为项目中的全新工作空间。</p><p>该值不会导出到子进程的环境中。</p><h2 id="workspaces" tabindex="-1"><code>workspaces</code> <a class="header-anchor" href="#workspaces" aria-label="Permalink to &quot;\`workspaces\`&quot;">​</a></h2><ul><li>默认值：假</li><li>类型：布尔值</li></ul><p><strong>允许在所有</strong>已配置工作区的上下文中运行命令。</p><p>该值不会导出到子进程的环境中。</p><h2 id="examples" tabindex="-1"><code>examples</code> <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;\`examples\`&quot;">​</a></h2><p><code>tap</code>使用提供的参数运行本地依赖项中的版本：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--tap</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--bail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">test/foo.js</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tap</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--bail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">test/foo.js</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--tap</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--bail</span><span style="color:#24292E;"> </span><span style="color:#032F62;">test/foo.js</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">npx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tap</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--bail</span><span style="color:#24292E;"> </span><span style="color:#032F62;">test/foo.js</span></span></code></pre></div><p>通过指定选项来运行名称与包名称匹配的命令<em>以外的</em>命令<code>--package</code>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--package</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">foo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--bar-argument</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;"># ~ 或 ~</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--package</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">foo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--bar-argument</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--package</span><span style="color:#24292E;"> </span><span style="color:#032F62;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">foo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--bar-argument</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6A737D;"># ~ 或 ~</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">npx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--package</span><span style="color:#24292E;"> </span><span style="color:#032F62;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">foo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--bar-argument</span></span></code></pre></div><p>在当前项目的上下文中运行任意 shell 脚本：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">x</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;eslint &amp;&amp; say &quot;hooray, lint passed&quot;&#39;</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">npx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;eslint &amp;&amp; say &quot;hooray, lint passed&quot;&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">x</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;eslint &amp;&amp; say &quot;hooray, lint passed&quot;&#39;</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">npx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;eslint &amp;&amp; say &quot;hooray, lint passed&quot;&#39;</span></span></code></pre></div><h2 id="workspaces-support" tabindex="-1"><code>workspaces-support</code> <a class="header-anchor" href="#workspaces-support" aria-label="Permalink to &quot;\`workspaces-support\`&quot;">​</a></h2><p>您可以使用<code>workspace</code>或<code>workspaces</code>配置来在指定工作区的上下文中从 npm 包（本地安装或远程获取）运行任意命令。如果未<code>--call</code>提供位置参数或选项，它将在每个已配置工作区的上下文中一次打开一个交互式子 shell。</p><p>给定一个已配置工作区的项目，例如：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">.</span></span>
<span class="line"><span style="color:#B392F0;">+--</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package.json</span></span>
<span class="line"><span style="color:#9ECBFF;">\`</span><span style="color:#B392F0;">--</span><span style="color:#9ECBFF;"> packages</span></span>
<span class="line"><span style="color:#9ECBFF;">   </span><span style="color:#B392F0;">+--</span><span style="color:#9ECBFF;"> a</span></span>
<span class="line"><span style="color:#9ECBFF;">   </span><span style="color:#F97583;">|</span><span style="color:#9ECBFF;">   \`</span><span style="color:#B392F0;">--</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package.json</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">+--</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">b</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">\`</span><span style="color:#B392F0;">--</span><span style="color:#9ECBFF;"> package.json</span></span>
<span class="line"><span style="color:#9ECBFF;">   \`</span><span style="color:#B392F0;">--</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">c</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">\`</span><span style="color:#B392F0;">--</span><span style="color:#9ECBFF;"> package.json</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">.</span></span>
<span class="line"><span style="color:#6F42C1;">+--</span><span style="color:#24292E;"> </span><span style="color:#032F62;">package.json</span></span>
<span class="line"><span style="color:#032F62;">\`</span><span style="color:#6F42C1;">--</span><span style="color:#032F62;"> packages</span></span>
<span class="line"><span style="color:#032F62;">   </span><span style="color:#6F42C1;">+--</span><span style="color:#032F62;"> a</span></span>
<span class="line"><span style="color:#032F62;">   </span><span style="color:#D73A49;">|</span><span style="color:#032F62;">   \`</span><span style="color:#6F42C1;">--</span><span style="color:#24292E;"> </span><span style="color:#032F62;">package.json</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">+--</span><span style="color:#24292E;"> </span><span style="color:#032F62;">b</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">   </span><span style="color:#032F62;">\`</span><span style="color:#6F42C1;">--</span><span style="color:#032F62;"> package.json</span></span>
<span class="line"><span style="color:#032F62;">   \`</span><span style="color:#6F42C1;">--</span><span style="color:#24292E;"> </span><span style="color:#032F62;">c</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#032F62;">\`</span><span style="color:#6F42C1;">--</span><span style="color:#032F62;"> package.json</span></span></code></pre></div><p>假设工作区配置已在根级别文件中正确设置<code>package.json</code>。例如：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;workspaces&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [ </span><span style="color:#9ECBFF;">&quot;./packages/*&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;workspaces&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [ </span><span style="color:#032F62;">&quot;./packages/*&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>使用配置选项时，您可以在每个已配置工作区的上下文中执行包中的任意命令<code>workspaces</code>，在本示例中，我们使用<strong>eslint</strong>来检查每个工作区文件夹中找到的任何 js 文件：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">npm exec --ws -- eslint ./*.js</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">npm exec --ws -- eslint ./*.js</span></span></code></pre></div><h2 id="filtering-workspaces" tabindex="-1"><code>filtering-workspaces</code> <a class="header-anchor" href="#filtering-workspaces" aria-label="Permalink to &quot;\`filtering-workspaces\`&quot;">​</a></h2><p>还可以使用<code>workspace</code>配置以及名称或目录路径在单个工作区中执行命令：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">npm exec --workspace=a -- eslint ./*.js</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">npm exec --workspace=a -- eslint ./*.js</span></span></code></pre></div><p>还可以多次指定配置<code>workspace</code>，以便在多个工作区的上下文中运行特定脚本。在命令行中定义配置值时<code>workspace</code>，也可以使用<code>-w</code>简写，例如：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">npm exec -w a -w b -- eslint ./*.js</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">npm exec -w a -w b -- eslint ./*.js</span></span></code></pre></div><p><code>eslint</code>最后一个命令将在<code>./packages/a</code>和文件夹中运行该命令<code>./packages/b</code>。</p><h2 id="compatibility-with-older-npx-versions" tabindex="-1"><code>compatibility-with-older-npx-versions</code> <a class="header-anchor" href="#compatibility-with-older-npx-versions" aria-label="Permalink to &quot;\`compatibility-with-older-npx-versions\`&quot;">​</a></h2><p>该<code>npx</code>二进制文件在 npm v7.0.0 中被重写，并且独立<code>npx</code>包当时已被弃用。<code>npx</code>使用该<code>npm exec</code>命令而不是单独的参数解析器和安装过程，并提供一些功能来保持与其在先前版本中接受的参数的向后兼容性。</p><p>这导致其功能发生一些变化：</p><ul><li><code>npm</code>可以提供任何配置值。</li><li>为了防止因错误输入软件包名称而导致安全和用户体验问题，<code>npx</code>请在安装任何内容之前进行提示。使用<code>-y</code>或<code>--yes</code>选项禁止出现此提示。</li><li>该<code>--no-install</code>选项已弃用，并将转换为<code>--no</code>.</li><li>Shell 后备功能已被删除，因为这是不可取的。</li><li>该<code>-p</code>参数是 in npm 的简写<code>--parseable</code>，但也是<code>--package</code>in npx 的简写。这是被维护的，但仅限于<code>npx</code>可执行文件。</li><li>该<code>--ignore-existing</code>选项已删除。本地安装的 bin 始终存在于执行的进程中<code>PATH</code>。</li><li>该<code>--npm</code>选项已删除。<code>npx</code>将始终使用<code>npm</code>它附带的。</li><li>和<code>--node-arg</code>选项<code>-n</code>被删除。</li><li>该<code>--always-spawn</code>选项是多余的，因此被删除。</li><li>该<code>--shell</code>选项被替换为<code>--script-shell</code>，但保留在<code>npx</code>可执行文件中以实现向后兼容性。</li></ul><h2 id="a-note-on-caching" tabindex="-1"><code>a-note-on-caching</code> <a class="header-anchor" href="#a-note-on-caching" aria-label="Permalink to &quot;\`a-note-on-caching\`&quot;">​</a></h2><p>当使用指定的包名称时，npm cli 利用其内部包缓存。您可以使用以下命令更改 cli 使用此缓存的方式和时间。请参阅<code>npm cache</code>参考资料 来了解有关缓存如何工作的更多信息。</p><h2 id="prefer-online" tabindex="-1"><code>prefer-online</code> <a class="header-anchor" href="#prefer-online" aria-label="Permalink to &quot;\`prefer-online\`&quot;">​</a></h2><p>强制对包进行过时检查，使 cli 立即查找更新，即使包已在缓存中也是如此。</p><h2 id="prefer-offline" tabindex="-1"><code>prefer-offline</code> <a class="header-anchor" href="#prefer-offline" aria-label="Permalink to &quot;\`prefer-offline\`&quot;">​</a></h2><p>绕过包的陈旧性检查。仍然会向服务器请求丢失的数据。要强制完全离线模式，请使用<code>offline</code>.</p><h2 id="offline" tabindex="-1"><code>offline</code> <a class="header-anchor" href="#offline" aria-label="Permalink to &quot;\`offline\`&quot;">​</a></h2><p>强制完全离线模式。任何未本地缓存的包都将导致错误。</p><h2 id="workspace-1" tabindex="-1"><code>workspace-1</code> <a class="header-anchor" href="#workspace-1" aria-label="Permalink to &quot;\`workspace-1\`&quot;">​</a></h2><ul><li>默认：</li><li>类型：String（可设置多次）</li></ul><p>允许在当前项目的已配置工作区上下文中运行命令，同时通过仅运行此配置选项定义的工作区进行过滤。</p><p>配置的有效值为<code>workspace</code>：</p><ul><li>工作区名称</li><li>工作区目录的路径</li><li>父工作区目录的路径（将导致选择所有嵌套工作区）</li></ul><p>该值不会导出到子进程的环境中。</p><h2 id="workspaces-1" tabindex="-1"><code>workspaces-1</code> <a class="header-anchor" href="#workspaces-1" aria-label="Permalink to &quot;\`workspaces-1\`&quot;">​</a></h2><ul><li>别名：<code>--ws</code></li><li>类型：布尔值</li><li>默认：<code>false</code></li></ul><p>在当前项目的所有已配置工作区的上下文中运行脚本。</p>`,85),e=[l];function c(t,r,y,E,i,d){return a(),n("div",null,e)}const h=s(o,[["render",c]]);export{g as __pageData,h as default};
