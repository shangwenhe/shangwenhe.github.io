<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>正则的扩展 | Front End</title>
    <meta name="description" content="A VitePress site">
    <link rel="preload stylesheet" href="/assets/style.29263656.css" as="style">
    
    <script type="module" src="/assets/app.fdf74fea.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.681fc4ae.js">
    <link rel="modulepreload" href="/assets/chunks/theme.080d892e.js">
    <link rel="modulepreload" href="/assets/chunks/giscus-2a044aea.497f0bd4.js">
    <link rel="modulepreload" href="/assets/es6_regex.md.03432ef1.lean.js">
    <meta name="baidu-site-verification" content="codeva-0eF9ndfgJR">
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-eb443a73><!--[--><!--]--><div data-v-eb443a73 data-v-ed8916e4><span tabindex="-1" data-v-ed8916e4></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-ed8916e4> Skip to content </a></div><!----><header class="VPNav" data-v-eb443a73 data-v-5bdc5df3><div class="VPNavBar has-sidebar" data-v-5bdc5df3 data-v-f1abbc6e><div class="container" data-v-f1abbc6e><div class="title" data-v-f1abbc6e><div class="VPNavBarTitle has-sidebar" data-v-f1abbc6e data-v-2973dbb4><a class="title" href="/" data-v-2973dbb4><!--[--><!--]--><!----><!--[-->Front End<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-f1abbc6e><div class="curtain" data-v-f1abbc6e></div><div class="content-body" data-v-f1abbc6e><!--[--><!--]--><div class="VPNavBarSearch search" data-v-f1abbc6e><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-f1abbc6e data-v-f732b5d0><span id="main-nav-aria-label" class="visually-hidden" data-v-f732b5d0>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ts/intro.html" tabindex="0" data-v-f732b5d0 data-v-cb318fec><!--[--><span data-v-cb318fec>TypeScript</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/js/basic/introduction.html" tabindex="0" data-v-f732b5d0 data-v-cb318fec><!--[--><span data-v-cb318fec>JavaScript</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/es6/intro.html" tabindex="0" data-v-f732b5d0 data-v-cb318fec><!--[--><span data-v-cb318fec>ES6</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://github.com/wangdoc" target="_blank" rel="wangdoc" tabindex="0" data-v-f732b5d0 data-v-cb318fec><!--[--><span data-v-cb318fec>相关资料</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-f1abbc6e data-v-5e9f0637><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-5e9f0637 data-v-3329432d data-v-1c29e291><span class="check" data-v-1c29e291><span class="icon" data-v-1c29e291><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-3329432d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-3329432d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-f1abbc6e data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/shangwenhe/shangwenhe.github.io" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-16cf740a><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-f1abbc6e data-v-c8c2ae4b data-v-aa8de344><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-aa8de344><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-aa8de344><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-aa8de344><div class="VPMenu" data-v-aa8de344 data-v-e42ed9b3><!----><!--[--><!--[--><!----><div class="group" data-v-c8c2ae4b><div class="item appearance" data-v-c8c2ae4b><p class="label" data-v-c8c2ae4b>Appearance</p><div class="appearance-action" data-v-c8c2ae4b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-c8c2ae4b data-v-3329432d data-v-1c29e291><span class="check" data-v-1c29e291><span class="icon" data-v-1c29e291><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-3329432d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-3329432d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-c8c2ae4b><div class="item social-links" data-v-c8c2ae4b><div class="VPSocialLinks social-links-list" data-v-c8c2ae4b data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/shangwenhe/shangwenhe.github.io" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-16cf740a><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-f1abbc6e data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-eb443a73 data-v-9e669cc1><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-9e669cc1><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-9e669cc1><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-9e669cc1>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-9e669cc1 data-v-24251f6f><button data-v-24251f6f>Return to top</button><!----></div></div><aside class="VPSidebar" inert data-v-eb443a73 data-v-ee2efba5><div class="curtain" data-v-ee2efba5></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-ee2efba5><span class="visually-hidden" id="sidebar-aria-label" data-v-ee2efba5> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-ee2efba5><section class="VPSidebarItem level-0" data-v-ee2efba5 data-v-bd01e0d5><!----><div class="items" data-v-bd01e0d5><!--[--><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/intro.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>ECMAScript 6 简介</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/let.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>let 和 const 命令</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/destructuring.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>变量的解构赋值</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/string.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>字符串的扩展</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/string-methods.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>字符串的新增方法</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-ee2efba5><section class="VPSidebarItem level-0 collapsible has-active" data-v-ee2efba5 data-v-bd01e0d5><div class="item" role="button" tabindex="0" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><h2 class="text" data-v-bd01e0d5>扩展</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-bd01e0d5><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-bd01e0d5><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-bd01e0d5><!--[--><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/regex.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>正则的扩展</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/number.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>数值的扩展</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/function.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>函数的扩展</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/array.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>数组的扩展</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/object.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>对象的扩展</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/object-methods.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>对象的新增方法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/operator.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>运算符的扩展</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-ee2efba5><section class="VPSidebarItem level-0 collapsible" data-v-ee2efba5 data-v-bd01e0d5><div class="item" role="button" tabindex="0" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><h2 class="text" data-v-bd01e0d5>Symbol/Proxy</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-bd01e0d5><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-bd01e0d5><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-bd01e0d5><!--[--><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/symbol.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Symbol</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/set-map.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Set 和 Map 数据结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/proxy.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Proxy</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/reflect.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Reflect</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-ee2efba5><section class="VPSidebarItem level-0 collapsible" data-v-ee2efba5 data-v-bd01e0d5><div class="item" role="button" tabindex="0" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><h2 class="text" data-v-bd01e0d5>Promise/Generator</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-bd01e0d5><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-bd01e0d5><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-bd01e0d5><!--[--><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/promise.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Promise 对象</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/iterator.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Iterator 和 for...of 循环</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/generator.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Generator 函数的语法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/generator-async.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Generator 函数的异步应用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/async.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>async 函数</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-ee2efba5><section class="VPSidebarItem level-0 collapsible" data-v-ee2efba5 data-v-bd01e0d5><div class="item" role="button" tabindex="0" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><h2 class="text" data-v-bd01e0d5>Class/Module</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-bd01e0d5><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-bd01e0d5><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-bd01e0d5><!--[--><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/class.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Class 的基本语法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/class-extends.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Class 的继承</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/module.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Module 的语法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/module-loader.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Module 的加载实现</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-ee2efba5><section class="VPSidebarItem level-0 collapsible" data-v-ee2efba5 data-v-bd01e0d5><div class="item" role="button" tabindex="0" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><h2 class="text" data-v-bd01e0d5>编程风格</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-bd01e0d5><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-bd01e0d5><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-bd01e0d5><!--[--><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/style.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>编程风格</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/spec.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>读懂规格</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/async-iterator.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>异步遍历器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/arraybuffer.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>ArrayBuffer</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-ee2efba5><section class="VPSidebarItem level-0" data-v-ee2efba5 data-v-bd01e0d5><!----><div class="items" data-v-bd01e0d5><!--[--><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/proposals.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>最新提案</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/decorator.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>Decorator</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-bd01e0d5 data-v-bd01e0d5><div class="item" data-v-bd01e0d5><div class="indicator" data-v-bd01e0d5></div><a class="VPLink link link" href="/es6/reference.html" data-v-bd01e0d5><!--[--><p class="text" data-v-bd01e0d5>参考链接</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-eb443a73 data-v-3cf691b6><div class="VPDoc has-sidebar has-aside" data-v-3cf691b6 data-v-a3c25e27><!--[--><!--]--><div class="container" data-v-a3c25e27><div class="aside" data-v-a3c25e27><div class="aside-curtain" data-v-a3c25e27></div><div class="aside-container" data-v-a3c25e27><div class="aside-content" data-v-a3c25e27><div class="VPDocAside" data-v-a3c25e27 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-cb998dce data-v-3a6c4994><div class="content" data-v-3a6c4994><div class="outline-marker" data-v-3a6c4994></div><div class="outline-title" role="heading" aria-level="2" data-v-3a6c4994>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-3a6c4994><span class="visually-hidden" id="doc-outline-aria-label" data-v-3a6c4994> Table of Contents for current page </span><ul class="root" data-v-3a6c4994 data-v-463da30f><!--[--><!--]--></ul></nav></div></div><!--[--><!--[--><!--[--><!--[--> My custom sidebar bottom content <!--]--><!--]--><!--]--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-a3c25e27><div class="content-container" data-v-a3c25e27><!--[--><!--]--><!----><main class="main" data-v-a3c25e27><div style="position:relative;" class="vp-doc _es6_regex" data-v-a3c25e27><div><h1 id="正则的扩展" tabindex="-1">正则的扩展 <a class="header-anchor" href="#正则的扩展" aria-label="Permalink to &quot;正则的扩展&quot;">​</a></h1><h2 id="regexp-构造函数" tabindex="-1">RegExp 构造函数 <a class="header-anchor" href="#regexp-构造函数" aria-label="Permalink to &quot;RegExp 构造函数&quot;">​</a></h2><p>在 ES5 中，<code>RegExp</code>构造函数的参数有两种情况。</p><p>第一种情况是，参数是字符串，这时第二个参数表示正则表达式的修饰符（flag）。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> regex </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RegExp</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xyz&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;i&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">// 等价于</span></span>
<span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> regex </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">xyz</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">i</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> regex </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RegExp</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xyz&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;i&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">// 等价于</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> regex </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /xyz/</span><span style="color:#D73A49;">i</span><span style="color:#24292E;">;</span></span></code></pre></div><p>第二种情况是，参数是一个正则表示式，这时会返回一个原有正则表达式的拷贝。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> regex </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RegExp</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">xyz</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">i</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">// 等价于</span></span>
<span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> regex </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">xyz</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">i</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> regex </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RegExp</span><span style="color:#24292E;">(</span><span style="color:#032F62;">/xyz/</span><span style="color:#D73A49;">i</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">// 等价于</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> regex </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /xyz/</span><span style="color:#D73A49;">i</span><span style="color:#24292E;">;</span></span></code></pre></div><p>但是，ES5 不允许此时使用第二个参数添加修饰符，否则会报错。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> regex </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RegExp</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">xyz</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;i&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">// Uncaught TypeError: Cannot supply flags when constructing one RegExp from another</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> regex </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RegExp</span><span style="color:#24292E;">(</span><span style="color:#032F62;">/xyz/</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;i&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">// Uncaught TypeError: Cannot supply flags when constructing one RegExp from another</span></span></code></pre></div><p>ES6 改变了这种行为。如果<code>RegExp</code>构造函数第一个参数是一个正则对象，那么可以使用第二个参数指定修饰符。而且，返回的正则表达式会忽略原有的正则表达式的修饰符，只使用新指定的修饰符。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RegExp</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">abc</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">ig</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;i&#39;</span><span style="color:#E1E4E8;">).flags</span></span>
<span class="line"><span style="color:#6A737D;">// &quot;i&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RegExp</span><span style="color:#24292E;">(</span><span style="color:#032F62;">/abc/</span><span style="color:#D73A49;">ig</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;i&#39;</span><span style="color:#24292E;">).flags</span></span>
<span class="line"><span style="color:#6A737D;">// &quot;i&quot;</span></span></code></pre></div><p>上面代码中，原有正则对象的修饰符是<code>ig</code>，它会被第二个参数<code>i</code>覆盖。</p><h2 id="字符串的正则方法" tabindex="-1">字符串的正则方法 <a class="header-anchor" href="#字符串的正则方法" aria-label="Permalink to &quot;字符串的正则方法&quot;">​</a></h2><p>ES6 出现之前，字符串对象共有 4 个方法，可以使用正则表达式：<code>match()</code>、<code>replace()</code>、<code>search()</code>和<code>split()</code>。</p><p>ES6 将这 4 个方法，在语言内部全部调用<code>RegExp</code>的实例方法，从而做到所有与正则相关的方法，全都定义在<code>RegExp</code>对象上。</p><ul><li><code>String.prototype.match</code> 调用 <code>RegExp.prototype[Symbol.match]</code></li><li><code>String.prototype.replace</code> 调用 <code>RegExp.prototype[Symbol.replace]</code></li><li><code>String.prototype.search</code> 调用 <code>RegExp.prototype[Symbol.search]</code></li><li><code>String.prototype.split</code> 调用 <code>RegExp.prototype[Symbol.split]</code></li></ul><h2 id="u-修饰符" tabindex="-1">u 修饰符 <a class="header-anchor" href="#u-修饰符" aria-label="Permalink to &quot;u 修饰符&quot;">​</a></h2><p>ES6 对正则表达式添加了<code>u</code>修饰符，含义为“Unicode 模式”，用来正确处理大于<code>\uFFFF</code>的 Unicode 字符。也就是说，会正确处理四个字节的 UTF-16 编码。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#79B8FF;">\uD83D</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#79B8FF;">\uD83D\uDC2A</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#79B8FF;">\uD83D</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#79B8FF;">\uD83D\uDC2A</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/</span><span style="color:#D73A49;">^</span><span style="color:#005CC5;">\uD83D</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;</span><span style="color:#005CC5;">\uD83D\uDC2A</span><span style="color:#032F62;">&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#032F62;">/</span><span style="color:#D73A49;">^</span><span style="color:#005CC5;">\uD83D</span><span style="color:#032F62;">/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;</span><span style="color:#005CC5;">\uD83D\uDC2A</span><span style="color:#032F62;">&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span></code></pre></div><p>上面代码中，<code>\uD83D\uDC2A</code>是一个四个字节的 UTF-16 编码，代表一个字符。但是，ES5 不支持四个字节的 UTF-16 编码，会将其识别为两个字符，导致第二行代码结果为<code>true</code>。加了<code>u</code>修饰符以后，ES6 就会识别其为一个字符，所以第一行代码结果为<code>false</code>。</p><p>一旦加上<code>u</code>修饰符号，就会修改下面这些正则表达式的行为。</p><p><strong>（1）点字符</strong></p><p>点（<code>.</code>）字符在正则表达式中，含义是除了换行符以外的任意单个字符。对于码点大于<code>0xFFFF</code>的 Unicode 字符，点字符不能识别，必须加上<code>u</code>修饰符。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> s </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;𠮷&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#79B8FF;">.</span><span style="color:#F97583;">$</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(s) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#79B8FF;">.</span><span style="color:#F97583;">$</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(s) </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> s </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;𠮷&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">/</span><span style="color:#D73A49;">^</span><span style="color:#005CC5;">.</span><span style="color:#D73A49;">$</span><span style="color:#032F62;">/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(s) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#032F62;">/</span><span style="color:#D73A49;">^</span><span style="color:#005CC5;">.</span><span style="color:#D73A49;">$</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(s) </span><span style="color:#6A737D;">// true</span></span></code></pre></div><p>上面代码表示，如果不添加<code>u</code>修饰符，正则表达式就会认为字符串为两个字符，从而匹配失败。</p><p><strong>（2）Unicode 字符表示法</strong></p><p>ES6 新增了使用大括号表示 Unicode 字符，这种表示法在正则表达式中必须加上<code>u</code>修饰符，才能识别当中的大括号，否则会被解读为量词。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#85E89D;font-weight:bold;">\u</span><span style="color:#F97583;">{61}</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;a&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#85E89D;font-weight:bold;">\u</span><span style="color:#F97583;">{61}</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;a&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#85E89D;font-weight:bold;">\u</span><span style="color:#DBEDFF;">{20BB7}</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;𠮷&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/</span><span style="color:#22863A;font-weight:bold;">\u</span><span style="color:#D73A49;">{61}</span><span style="color:#032F62;">/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;a&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#032F62;">/</span><span style="color:#22863A;font-weight:bold;">\u</span><span style="color:#D73A49;">{61}</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;a&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#032F62;">/</span><span style="color:#22863A;font-weight:bold;">\u</span><span style="color:#032F62;">{20BB7}/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;𠮷&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span></code></pre></div><p>上面代码表示，如果不加<code>u</code>修饰符，正则表达式无法识别<code>\u{61}</code>这种表示法，只会认为这匹配 61 个连续的<code>u</code>。</p><p><strong>（3）量词</strong></p><p>使用<code>u</code>修饰符后，所有量词都会正确识别码点大于<code>0xFFFF</code>的 Unicode 字符。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">a</span><span style="color:#F97583;">{2}</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aa&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">a</span><span style="color:#F97583;">{2}</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aa&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">𠮷</span><span style="color:#F97583;">{2}</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;𠮷𠮷&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">𠮷</span><span style="color:#F97583;">{2}</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;𠮷𠮷&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/a</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;aa&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#032F62;">/a</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;aa&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#032F62;">/𠮷</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;𠮷𠮷&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#032F62;">/𠮷</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;𠮷𠮷&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span></code></pre></div><p><strong>（4）预定义模式</strong></p><p><code>u</code>修饰符也影响到预定义模式，能否正确识别码点大于<code>0xFFFF</code>的 Unicode 字符。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#79B8FF;">\S</span><span style="color:#F97583;">$</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;𠮷&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#79B8FF;">\S</span><span style="color:#F97583;">$</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;𠮷&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/</span><span style="color:#D73A49;">^</span><span style="color:#005CC5;">\S</span><span style="color:#D73A49;">$</span><span style="color:#032F62;">/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;𠮷&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#032F62;">/</span><span style="color:#D73A49;">^</span><span style="color:#005CC5;">\S</span><span style="color:#D73A49;">$</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;𠮷&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span></code></pre></div><p>上面代码的<code>\S</code>是预定义模式，匹配所有非空白字符。只有加了<code>u</code>修饰符，它才能正确匹配码点大于<code>0xFFFF</code>的 Unicode 字符。</p><p>利用这一点，可以写出一个正确返回字符串长度的函数。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">codePointLength</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">text</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> text.</span><span style="color:#B392F0;">match</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">/</span><span style="color:#79B8FF;">[\s\S]</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">gu</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> result </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> result.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> s </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;𠮷𠮷&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">s.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 4</span></span>
<span class="line"><span style="color:#B392F0;">codePointLength</span><span style="color:#E1E4E8;">(s) </span><span style="color:#6A737D;">// 2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">codePointLength</span><span style="color:#24292E;">(</span><span style="color:#E36209;">text</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> result </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> text.</span><span style="color:#6F42C1;">match</span><span style="color:#24292E;">(</span><span style="color:#032F62;">/</span><span style="color:#005CC5;">[\s\S]</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">gu</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> result </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> result.</span><span style="color:#005CC5;">length</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> s </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;𠮷𠮷&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">s.</span><span style="color:#005CC5;">length</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 4</span></span>
<span class="line"><span style="color:#6F42C1;">codePointLength</span><span style="color:#24292E;">(s) </span><span style="color:#6A737D;">// 2</span></span></code></pre></div><p><strong>（5）i 修饰符</strong></p><p>有些 Unicode 字符的编码不同，但是字型很相近，比如，<code>\u004B</code>与<code>\u212A</code>都是大写的<code>K</code>。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#79B8FF;">[a-z]</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">i</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#79B8FF;">\u212A</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#79B8FF;">[a-z]</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">iu</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#79B8FF;">\u212A</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/</span><span style="color:#005CC5;">[a-z]</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">i</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;</span><span style="color:#005CC5;">\u212A</span><span style="color:#032F62;">&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#032F62;">/</span><span style="color:#005CC5;">[a-z]</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">iu</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;</span><span style="color:#005CC5;">\u212A</span><span style="color:#032F62;">&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span></code></pre></div><p>上面代码中，不加<code>u</code>修饰符，就无法识别非规范的<code>K</code>字符。</p><p><strong>（6）转义</strong></p><p>没有<code>u</code>修饰符的情况下，正则中没有定义的转义（如逗号的转义<code>\,</code>）无效，而在<code>u</code>模式会报错。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#85E89D;font-weight:bold;">\,</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// /\,/</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#85E89D;font-weight:bold;">\,</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 报错</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/</span><span style="color:#22863A;font-weight:bold;">\,</span><span style="color:#032F62;">/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// /\,/</span></span>
<span class="line"><span style="color:#032F62;">/</span><span style="color:#22863A;font-weight:bold;">\,</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 报错</span></span></code></pre></div><p>上面代码中，没有<code>u</code>修饰符时，逗号前面的反斜杠是无效的，加了<code>u</code>修饰符就报错。</p><h2 id="regexp-prototype-unicode-属性" tabindex="-1">RegExp.prototype.unicode 属性 <a class="header-anchor" href="#regexp-prototype-unicode-属性" aria-label="Permalink to &quot;RegExp.prototype.unicode 属性&quot;">​</a></h2><p>正则实例对象新增<code>unicode</code>属性，表示是否设置了<code>u</code>修饰符。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">r1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">hello</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">r2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">hello</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">r1.unicode </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#E1E4E8;">r2.unicode </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">r1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /hello/</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">r2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /hello/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">r1.unicode </span><span style="color:#6A737D;">// false</span></span>
<span class="line"><span style="color:#24292E;">r2.unicode </span><span style="color:#6A737D;">// true</span></span></code></pre></div><p>上面代码中，正则表达式是否设置了<code>u</code>修饰符，可以从<code>unicode</code>属性看出来。</p><h2 id="y-修饰符" tabindex="-1">y 修饰符 <a class="header-anchor" href="#y-修饰符" aria-label="Permalink to &quot;y 修饰符&quot;">​</a></h2><p>除了<code>u</code>修饰符，ES6 还为正则表达式添加了<code>y</code>修饰符，叫做“粘连”（sticky）修饰符。</p><p><code>y</code>修饰符的作用与<code>g</code>修饰符类似，也是全局匹配，后一次匹配都从上一次匹配成功的下一个位置开始。不同之处在于，<code>g</code>修饰符只要剩余位置中存在匹配就可，而<code>y</code>修饰符确保匹配必须从剩余的第一个位置开始，这也就是“粘连”的涵义。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> s </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;aaa_aa_a&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> r1 </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">a</span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">g</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> r2 </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">a</span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">y</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">r1.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(s) </span><span style="color:#6A737D;">// [&quot;aaa&quot;]</span></span>
<span class="line"><span style="color:#E1E4E8;">r2.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(s) </span><span style="color:#6A737D;">// [&quot;aaa&quot;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">r1.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(s) </span><span style="color:#6A737D;">// [&quot;aa&quot;]</span></span>
<span class="line"><span style="color:#E1E4E8;">r2.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(s) </span><span style="color:#6A737D;">// null</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> s </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;aaa_aa_a&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> r1 </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /a</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">g</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> r2 </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /a</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">y</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">r1.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(s) </span><span style="color:#6A737D;">// [&quot;aaa&quot;]</span></span>
<span class="line"><span style="color:#24292E;">r2.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(s) </span><span style="color:#6A737D;">// [&quot;aaa&quot;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">r1.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(s) </span><span style="color:#6A737D;">// [&quot;aa&quot;]</span></span>
<span class="line"><span style="color:#24292E;">r2.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(s) </span><span style="color:#6A737D;">// null</span></span></code></pre></div><p>上面代码有两个正则表达式，一个使用<code>g</code>修饰符，另一个使用<code>y</code>修饰符。这两个正则表达式各执行了两次，第一次执行的时候，两者行为相同，剩余字符串都是<code>_aa_a</code>。由于<code>g</code>修饰没有位置要求，所以第二次执行会返回结果，而<code>y</code>修饰符要求匹配必须从头部开始，所以返回<code>null</code>。</p><p>如果改一下正则表达式，保证每次都能头部匹配，<code>y</code>修饰符就会返回结果了。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> s </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;aaa_aa_a&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> r </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">a</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">_</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">y</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">r.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(s) </span><span style="color:#6A737D;">// [&quot;aaa_&quot;]</span></span>
<span class="line"><span style="color:#E1E4E8;">r.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(s) </span><span style="color:#6A737D;">// [&quot;aa_&quot;]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> s </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;aaa_aa_a&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> r </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /a</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">_/</span><span style="color:#D73A49;">y</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">r.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(s) </span><span style="color:#6A737D;">// [&quot;aaa_&quot;]</span></span>
<span class="line"><span style="color:#24292E;">r.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(s) </span><span style="color:#6A737D;">// [&quot;aa_&quot;]</span></span></code></pre></div><p>上面代码每次匹配，都是从剩余字符串的头部开始。</p><p>使用<code>lastIndex</code>属性，可以更好地说明<code>y</code>修饰符。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">a</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">g</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 指定从2号位置（y）开始匹配</span></span>
<span class="line"><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;">.lastIndex </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 匹配成功</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">match</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xaya&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 在3号位置匹配成功</span></span>
<span class="line"><span style="color:#E1E4E8;">match.index </span><span style="color:#6A737D;">// 3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 下一次匹配从4号位开始</span></span>
<span class="line"><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;">.lastIndex </span><span style="color:#6A737D;">// 4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 4号位开始匹配失败</span></span>
<span class="line"><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xaya&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// null</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /a/</span><span style="color:#D73A49;">g</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 指定从2号位置（y）开始匹配</span></span>
<span class="line"><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;">.lastIndex </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 匹配成功</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">match</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xaya&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 在3号位置匹配成功</span></span>
<span class="line"><span style="color:#24292E;">match.index </span><span style="color:#6A737D;">// 3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 下一次匹配从4号位开始</span></span>
<span class="line"><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;">.lastIndex </span><span style="color:#6A737D;">// 4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 4号位开始匹配失败</span></span>
<span class="line"><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xaya&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// null</span></span></code></pre></div><p>上面代码中，<code>lastIndex</code>属性指定每次搜索的开始位置，<code>g</code>修饰符从这个位置开始向后搜索，直到发现匹配为止。</p><p><code>y</code>修饰符同样遵守<code>lastIndex</code>属性，但是要求必须在<code>lastIndex</code>指定的位置发现匹配。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">a</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">y</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 指定从2号位置开始匹配</span></span>
<span class="line"><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;">.lastIndex </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 不是粘连，匹配失败</span></span>
<span class="line"><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xaya&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// null</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 指定从3号位置开始匹配</span></span>
<span class="line"><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;">.lastIndex </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 3号位置是粘连，匹配成功</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">match</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;xaya&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">match.index </span><span style="color:#6A737D;">// 3</span></span>
<span class="line"><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;">.lastIndex </span><span style="color:#6A737D;">// 4</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /a/</span><span style="color:#D73A49;">y</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 指定从2号位置开始匹配</span></span>
<span class="line"><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;">.lastIndex </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 不是粘连，匹配失败</span></span>
<span class="line"><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xaya&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// null</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 指定从3号位置开始匹配</span></span>
<span class="line"><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;">.lastIndex </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 3号位置是粘连，匹配成功</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">match</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;xaya&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">match.index </span><span style="color:#6A737D;">// 3</span></span>
<span class="line"><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;">.lastIndex </span><span style="color:#6A737D;">// 4</span></span></code></pre></div><p>实际上，<code>y</code>修饰符号隐含了头部匹配的标志<code>^</code>。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">b</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">y</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aba&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;">// null</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/b/</span><span style="color:#D73A49;">y</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;aba&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">// null</span></span></code></pre></div><p>上面代码由于不能保证头部匹配，所以返回<code>null</code>。<code>y</code>修饰符的设计本意，就是让头部匹配的标志<code>^</code>在全局匹配中都有效。</p><p>下面是字符串对象的<code>replace</code>方法的例子。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">a</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">gy</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#9ECBFF;">&#39;aaxa&#39;</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">REGEX</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;-&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// &#39;--xa&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /a/</span><span style="color:#D73A49;">gy</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#032F62;">&#39;aaxa&#39;</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">replace</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">REGEX</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;-&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// &#39;--xa&#39;</span></span></code></pre></div><p>上面代码中，最后一个<code>a</code>因为不是出现在下一次匹配的头部，所以不会被替换。</p><p>单单一个<code>y</code>修饰符对<code>match</code>方法，只能返回第一个匹配，必须与<code>g</code>修饰符联用，才能返回所有匹配。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">&#39;a1a2a3&#39;</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">match</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">a</span><span style="color:#79B8FF;">\d</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">y</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// [&quot;a1&quot;]</span></span>
<span class="line"><span style="color:#9ECBFF;">&#39;a1a2a3&#39;</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">match</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">a</span><span style="color:#79B8FF;">\d</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">gy</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// [&quot;a1&quot;, &quot;a2&quot;, &quot;a3&quot;]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">&#39;a1a2a3&#39;</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">match</span><span style="color:#24292E;">(</span><span style="color:#032F62;">/a</span><span style="color:#005CC5;">\d</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">y</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// [&quot;a1&quot;]</span></span>
<span class="line"><span style="color:#032F62;">&#39;a1a2a3&#39;</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">match</span><span style="color:#24292E;">(</span><span style="color:#032F62;">/a</span><span style="color:#005CC5;">\d</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">gy</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// [&quot;a1&quot;, &quot;a2&quot;, &quot;a3&quot;]</span></span></code></pre></div><p><code>y</code>修饰符的一个应用，是从字符串提取 token（词元），<code>y</code>修饰符确保了匹配之间不会有漏掉的字符。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">TOKEN_Y</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#79B8FF;">\s</span><span style="color:#F97583;">*</span><span style="color:#DBEDFF;">(</span><span style="color:#85E89D;font-weight:bold;">\+</span><span style="color:#F97583;">|</span><span style="color:#79B8FF;">[0-9]</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">)</span><span style="color:#79B8FF;">\s</span><span style="color:#F97583;">*</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">y</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">TOKEN_G</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#79B8FF;">\s</span><span style="color:#F97583;">*</span><span style="color:#DBEDFF;">(</span><span style="color:#85E89D;font-weight:bold;">\+</span><span style="color:#F97583;">|</span><span style="color:#79B8FF;">[0-9]</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">)</span><span style="color:#79B8FF;">\s</span><span style="color:#F97583;">*</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">g</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">tokenize</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">TOKEN_Y</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;3 + 4&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;">// [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ]</span></span>
<span class="line"><span style="color:#B392F0;">tokenize</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">TOKEN_G</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;3 + 4&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;">// [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tokenize</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">TOKEN_REGEX</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">str</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [];</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> match;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (match </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">TOKEN_REGEX</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(str)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    result.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(match[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">]);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> result;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">TOKEN_Y</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /</span><span style="color:#005CC5;">\s</span><span style="color:#D73A49;">*</span><span style="color:#032F62;">(</span><span style="color:#22863A;font-weight:bold;">\+</span><span style="color:#D73A49;">|</span><span style="color:#005CC5;">[0-9]</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">)</span><span style="color:#005CC5;">\s</span><span style="color:#D73A49;">*</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">y</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">TOKEN_G</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /</span><span style="color:#005CC5;">\s</span><span style="color:#D73A49;">*</span><span style="color:#032F62;">(</span><span style="color:#22863A;font-weight:bold;">\+</span><span style="color:#D73A49;">|</span><span style="color:#005CC5;">[0-9]</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">)</span><span style="color:#005CC5;">\s</span><span style="color:#D73A49;">*</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">g</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">tokenize</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">TOKEN_Y</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;3 + 4&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">// [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ]</span></span>
<span class="line"><span style="color:#6F42C1;">tokenize</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">TOKEN_G</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;3 + 4&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">// [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">tokenize</span><span style="color:#24292E;">(</span><span style="color:#E36209;">TOKEN_REGEX</span><span style="color:#24292E;">, </span><span style="color:#E36209;">str</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> result </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [];</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> match;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (match </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">TOKEN_REGEX</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(str)) {</span></span>
<span class="line"><span style="color:#24292E;">    result.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(match[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">]);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> result;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>上面代码中，如果字符串里面没有非法字符，<code>y</code>修饰符与<code>g</code>修饰符的提取结果是一样的。但是，一旦出现非法字符，两者的行为就不一样了。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">tokenize</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">TOKEN_Y</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;3x + 4&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;">// [ &#39;3&#39; ]</span></span>
<span class="line"><span style="color:#B392F0;">tokenize</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">TOKEN_G</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;3x + 4&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;">// [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">tokenize</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">TOKEN_Y</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;3x + 4&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">// [ &#39;3&#39; ]</span></span>
<span class="line"><span style="color:#6F42C1;">tokenize</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">TOKEN_G</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;3x + 4&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">// [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ]</span></span></code></pre></div><p>上面代码中，<code>g</code>修饰符会忽略非法字符，而<code>y</code>修饰符不会，这样就很容易发现错误。</p><h2 id="regexp-prototype-sticky-属性" tabindex="-1">RegExp.prototype.sticky 属性 <a class="header-anchor" href="#regexp-prototype-sticky-属性" aria-label="Permalink to &quot;RegExp.prototype.sticky 属性&quot;">​</a></h2><p>与<code>y</code>修饰符相匹配，ES6 的正则实例对象多了<code>sticky</code>属性，表示是否设置了<code>y</code>修饰符。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> r </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">hello</span><span style="color:#79B8FF;">\d</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">y</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">r.sticky </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> r </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /hello</span><span style="color:#005CC5;">\d</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">y</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">r.sticky </span><span style="color:#6A737D;">// true</span></span></code></pre></div><h2 id="regexp-prototype-flags-属性" tabindex="-1">RegExp.prototype.flags 属性 <a class="header-anchor" href="#regexp-prototype-flags-属性" aria-label="Permalink to &quot;RegExp.prototype.flags 属性&quot;">​</a></h2><p>ES6 为正则表达式新增了<code>flags</code>属性，会返回正则表达式的修饰符。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// ES5 的 source 属性</span></span>
<span class="line"><span style="color:#6A737D;">// 返回正则表达式的正文</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">abc</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">ig</span><span style="color:#E1E4E8;">.source</span></span>
<span class="line"><span style="color:#6A737D;">// &quot;abc&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ES6 的 flags 属性</span></span>
<span class="line"><span style="color:#6A737D;">// 返回正则表达式的修饰符</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">abc</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">ig</span><span style="color:#E1E4E8;">.flags</span></span>
<span class="line"><span style="color:#6A737D;">// &#39;gi&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// ES5 的 source 属性</span></span>
<span class="line"><span style="color:#6A737D;">// 返回正则表达式的正文</span></span>
<span class="line"><span style="color:#032F62;">/abc/</span><span style="color:#D73A49;">ig</span><span style="color:#24292E;">.source</span></span>
<span class="line"><span style="color:#6A737D;">// &quot;abc&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ES6 的 flags 属性</span></span>
<span class="line"><span style="color:#6A737D;">// 返回正则表达式的修饰符</span></span>
<span class="line"><span style="color:#032F62;">/abc/</span><span style="color:#D73A49;">ig</span><span style="color:#24292E;">.flags</span></span>
<span class="line"><span style="color:#6A737D;">// &#39;gi&#39;</span></span></code></pre></div><h2 id="s-修饰符-dotall-模式" tabindex="-1">s 修饰符：dotAll 模式 <a class="header-anchor" href="#s-修饰符-dotall-模式" aria-label="Permalink to &quot;s 修饰符：dotAll 模式&quot;">​</a></h2><p>正则表达式中，点（<code>.</code>）是一个特殊字符，代表任意的单个字符，但是有两个例外。一个是四个字节的 UTF-16 字符，这个可以用<code>u</code>修饰符解决；另一个是行终止符（line terminator character）。</p><p>所谓行终止符，就是该字符表示一行的终结。以下四个字符属于“行终止符”。</p><ul><li>U+000A 换行符（<code>\n</code>）</li><li>U+000D 回车符（<code>\r</code>）</li><li>U+2028 行分隔符（line separator）</li><li>U+2029 段分隔符（paragraph separator）</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">foo</span><span style="color:#79B8FF;">.</span><span style="color:#DBEDFF;">bar</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;foo</span><span style="color:#79B8FF;">\n</span><span style="color:#9ECBFF;">bar&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;">// false</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/foo</span><span style="color:#005CC5;">.</span><span style="color:#032F62;">bar/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;foo</span><span style="color:#005CC5;">\n</span><span style="color:#032F62;">bar&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">// false</span></span></code></pre></div><p>上面代码中，因为<code>.</code>不匹配<code>\n</code>，所以正则表达式返回<code>false</code>。</p><p>但是，很多时候我们希望匹配的是任意单个字符，这时有一种变通的写法。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">foo</span><span style="color:#79B8FF;">[</span><span style="color:#F97583;">^</span><span style="color:#79B8FF;">]</span><span style="color:#DBEDFF;">bar</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;foo</span><span style="color:#79B8FF;">\n</span><span style="color:#9ECBFF;">bar&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/foo</span><span style="color:#005CC5;">[</span><span style="color:#D73A49;">^</span><span style="color:#005CC5;">]</span><span style="color:#032F62;">bar/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;foo</span><span style="color:#005CC5;">\n</span><span style="color:#032F62;">bar&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">// true</span></span></code></pre></div><p>这种解决方案毕竟不太符合直觉，ES2018 <a href="https://github.com/tc39/proposal-regexp-dotall-flag" target="_blank" rel="noreferrer">引入</a><code>s</code>修饰符，使得<code>.</code>可以匹配任意单个字符。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">foo</span><span style="color:#79B8FF;">.</span><span style="color:#DBEDFF;">bar</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">s</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;foo</span><span style="color:#79B8FF;">\n</span><span style="color:#9ECBFF;">bar&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/foo</span><span style="color:#005CC5;">.</span><span style="color:#032F62;">bar/</span><span style="color:#D73A49;">s</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;foo</span><span style="color:#005CC5;">\n</span><span style="color:#032F62;">bar&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span></code></pre></div><p>这被称为<code>dotAll</code>模式，即点（dot）代表一切字符。所以，正则表达式还引入了一个<code>dotAll</code>属性，返回一个布尔值，表示该正则表达式是否处在<code>dotAll</code>模式。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">re</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">foo</span><span style="color:#79B8FF;">.</span><span style="color:#DBEDFF;">bar</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">s</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">// 另一种写法</span></span>
<span class="line"><span style="color:#6A737D;">// const re = new RegExp(&#39;foo.bar&#39;, &#39;s&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">re.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;foo</span><span style="color:#79B8FF;">\n</span><span style="color:#9ECBFF;">bar&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">re.dotAll </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">re.flags </span><span style="color:#6A737D;">// &#39;s&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">re</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /foo</span><span style="color:#005CC5;">.</span><span style="color:#032F62;">bar/</span><span style="color:#D73A49;">s</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">// 另一种写法</span></span>
<span class="line"><span style="color:#6A737D;">// const re = new RegExp(&#39;foo.bar&#39;, &#39;s&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">re.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;foo</span><span style="color:#005CC5;">\n</span><span style="color:#032F62;">bar&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#24292E;">re.dotAll </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#24292E;">re.flags </span><span style="color:#6A737D;">// &#39;s&#39;</span></span></code></pre></div><p><code>/s</code>修饰符和多行修饰符<code>/m</code>不冲突，两者一起使用的情况下，<code>.</code>匹配所有字符，而<code>^</code>和<code>$</code>匹配每一行的行首和行尾。</p><h2 id="后行断言" tabindex="-1">后行断言 <a class="header-anchor" href="#后行断言" aria-label="Permalink to &quot;后行断言&quot;">​</a></h2><p>JavaScript 语言的正则表达式，只支持先行断言（lookahead）和先行否定断言（negative lookahead），不支持后行断言（lookbehind）和后行否定断言（negative lookbehind）。ES2018 引入<a href="https://github.com/tc39/proposal-regexp-lookbehind" target="_blank" rel="noreferrer">后行断言</a>，V8 引擎 4.9 版（Chrome 62）已经支持。</p><p>“先行断言”指的是，<code>x</code>只有在<code>y</code>前面才匹配，必须写成<code>/x(?=y)/</code>。比如，只匹配百分号之前的数字，要写成<code>/\d+(?=%)/</code>。“先行否定断言”指的是，<code>x</code>只有不在<code>y</code>前面才匹配，必须写成<code>/x(?!y)/</code>。比如，只匹配不在百分号之前的数字，要写成<code>/\d+(?!%)/</code>。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">(?=%)</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;100% of US presidents have been male&#39;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;">// [&quot;100&quot;]</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">(?!%)</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;that’s all 44 of them&#39;</span><span style="color:#E1E4E8;">)                 </span><span style="color:#6A737D;">// [&quot;44&quot;]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">(?=%)/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;100% of US presidents have been male&#39;</span><span style="color:#24292E;">)  </span><span style="color:#6A737D;">// [&quot;100&quot;]</span></span>
<span class="line"><span style="color:#032F62;">/</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">(?!%)/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;that’s all 44 of them&#39;</span><span style="color:#24292E;">)                 </span><span style="color:#6A737D;">// [&quot;44&quot;]</span></span></code></pre></div><p>上面两个字符串，如果互换正则表达式，就不会得到相同结果。另外，还可以看到，“先行断言”括号之中的部分（<code>(?=%)</code>），是不计入返回结果的。</p><p>“后行断言”正好与“先行断言”相反，<code>x</code>只有在<code>y</code>后面才匹配，必须写成<code>/(?&lt;=y)x/</code>。比如，只匹配美元符号之后的数字，要写成<code>/(?&lt;=\$)\d+/</code>。“后行否定断言”则与“先行否定断言”相反，<code>x</code>只有不在<code>y</code>后面才匹配，必须写成<code>/(?&lt;!y)x/</code>。比如，只匹配不在美元符号后面的数字，要写成<code>/(?&lt;!\$)\d+/</code>。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">(?&lt;=</span><span style="color:#85E89D;font-weight:bold;">\$</span><span style="color:#DBEDFF;">)</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Benjamin Franklin is on the $100 bill&#39;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;">// [&quot;100&quot;]</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">(?&lt;!</span><span style="color:#85E89D;font-weight:bold;">\$</span><span style="color:#DBEDFF;">)</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;it’s worth about €90&#39;</span><span style="color:#E1E4E8;">)                   </span><span style="color:#6A737D;">// [&quot;90&quot;]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/(?&lt;=</span><span style="color:#22863A;font-weight:bold;">\$</span><span style="color:#032F62;">)</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;Benjamin Franklin is on the $100 bill&#39;</span><span style="color:#24292E;">)  </span><span style="color:#6A737D;">// [&quot;100&quot;]</span></span>
<span class="line"><span style="color:#032F62;">/(?&lt;!</span><span style="color:#22863A;font-weight:bold;">\$</span><span style="color:#032F62;">)</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;it’s worth about €90&#39;</span><span style="color:#24292E;">)                   </span><span style="color:#6A737D;">// [&quot;90&quot;]</span></span></code></pre></div><p>上面的例子中，“后行断言”的括号之中的部分（<code>(?&lt;=\$)</code>），也是不计入返回结果。</p><p>下面的例子是使用后行断言进行字符串替换。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">RE_DOLLAR_PREFIX</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">(?&lt;=</span><span style="color:#85E89D;font-weight:bold;">\$</span><span style="color:#DBEDFF;">)foo</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">g</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#9ECBFF;">&#39;$foo %foo foo&#39;</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">RE_DOLLAR_PREFIX</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;bar&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">// &#39;$bar %foo foo&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">RE_DOLLAR_PREFIX</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /(?&lt;=</span><span style="color:#22863A;font-weight:bold;">\$</span><span style="color:#032F62;">)foo/</span><span style="color:#D73A49;">g</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#032F62;">&#39;$foo %foo foo&#39;</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">replace</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">RE_DOLLAR_PREFIX</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;bar&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">// &#39;$bar %foo foo&#39;</span></span></code></pre></div><p>上面代码中，只有在美元符号后面的<code>foo</code>才会被替换。</p><p>“后行断言”的实现，需要先匹配<code>/(?&lt;=y)x/</code>的<code>x</code>，然后再回到左边，匹配<code>y</code>的部分。这种“先右后左”的执行顺序，与所有其他正则操作相反，导致了一些不符合预期的行为。</p><p>首先，后行断言的组匹配，与正常情况下结果是不一样的。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">(?&lt;=(</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">)(</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">))</span><span style="color:#F97583;">$</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;1053&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// [&quot;&quot;, &quot;1&quot;, &quot;053&quot;]</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#DBEDFF;">(</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">)(</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">)</span><span style="color:#F97583;">$</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;1053&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// [&quot;1053&quot;, &quot;105&quot;, &quot;3&quot;]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/(?&lt;=(</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">)(</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">))</span><span style="color:#D73A49;">$</span><span style="color:#032F62;">/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;1053&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// [&quot;&quot;, &quot;1&quot;, &quot;053&quot;]</span></span>
<span class="line"><span style="color:#032F62;">/</span><span style="color:#D73A49;">^</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">)(</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">)</span><span style="color:#D73A49;">$</span><span style="color:#032F62;">/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;1053&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// [&quot;1053&quot;, &quot;105&quot;, &quot;3&quot;]</span></span></code></pre></div><p>上面代码中，需要捕捉两个组匹配。没有“后行断言”时，第一个括号是贪婪模式，第二个括号只能捕获一个字符，所以结果是<code>105</code>和<code>3</code>。而“后行断言”时，由于执行顺序是从右到左，第二个括号是贪婪模式，第一个括号只能捕获一个字符，所以结果是<code>1</code>和<code>053</code>。</p><p>其次，“后行断言”的反斜杠引用，也与通常的顺序相反，必须放在对应的那个括号之前。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">(?&lt;=(o)d</span><span style="color:#F97583;">\1</span><span style="color:#DBEDFF;">)r</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;hodor&#39;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;">// null</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">(?&lt;=</span><span style="color:#F97583;">\1</span><span style="color:#DBEDFF;">d(o))r</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;hodor&#39;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;">// [&quot;r&quot;, &quot;o&quot;]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/(?&lt;=(o)d</span><span style="color:#D73A49;">\1</span><span style="color:#032F62;">)r/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;hodor&#39;</span><span style="color:#24292E;">)  </span><span style="color:#6A737D;">// null</span></span>
<span class="line"><span style="color:#032F62;">/(?&lt;=</span><span style="color:#D73A49;">\1</span><span style="color:#032F62;">d(o))r/</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;hodor&#39;</span><span style="color:#24292E;">)  </span><span style="color:#6A737D;">// [&quot;r&quot;, &quot;o&quot;]</span></span></code></pre></div><p>上面代码中，如果后行断言的反斜杠引用（<code>\1</code>）放在括号的后面，就不会得到匹配结果，必须放在前面才可以。因为后行断言是先从左到右扫描，发现匹配以后再回过头，从右到左完成反斜杠引用。</p><h2 id="unicode-属性类" tabindex="-1">Unicode 属性类 <a class="header-anchor" href="#unicode-属性类" aria-label="Permalink to &quot;Unicode 属性类&quot;">​</a></h2><p>ES2018 <a href="https://github.com/tc39/proposal-regexp-unicode-property-escapes" target="_blank" rel="noreferrer">引入</a>了 Unicode 属性类，允许使用<code>\p{...}</code>和<code>\P{...}</code>（<code>\P</code>是<code>\p</code>的否定形式）代表一类 Unicode 字符，匹配满足条件的所有字符。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">regexGreekSymbol</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#85E89D;font-weight:bold;">\p</span><span style="color:#DBEDFF;">{Script=Greek}</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">regexGreekSymbol.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;π&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">regexGreekSymbol</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /</span><span style="color:#22863A;font-weight:bold;">\p</span><span style="color:#032F62;">{Script=Greek}/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">regexGreekSymbol.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;π&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span></code></pre></div><p>上面代码中，<code>\p{Script=Greek}</code>表示匹配一个希腊文字母，所以匹配<code>π</code>成功。</p><p>Unicode 属性类的标准形式，需要同时指定属性名和属性值。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">\p{UnicodePropertyName</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">UnicodePropertyValue}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">\p{UnicodePropertyName</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">UnicodePropertyValue}</span></span></code></pre></div><p>但是，对于某些属性，可以只写属性名，或者只写属性值。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">\p{UnicodePropertyName}</span></span>
<span class="line"><span style="color:#E1E4E8;">\p{UnicodePropertyValue}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">\p{UnicodePropertyName}</span></span>
<span class="line"><span style="color:#24292E;">\p{UnicodePropertyValue}</span></span></code></pre></div><p><code>\P{…}</code>是<code>\p{…}</code>的反向匹配，即匹配不满足条件的字符。</p><p>注意，这两种类只对 Unicode 有效，所以使用的时候一定要加上<code>u</code>修饰符。如果不加<code>u</code>修饰符，正则表达式使用<code>\p</code>和<code>\P</code>会报错。</p><p>由于 Unicode 的各种属性非常多，所以这种新的类的表达能力非常强。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">regex</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#85E89D;font-weight:bold;">\p</span><span style="color:#DBEDFF;">{Decimal_Number}</span><span style="color:#F97583;">+$</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">regex.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;𝟏𝟐𝟑𝟜𝟝𝟞𝟩𝟪𝟫𝟬𝟭𝟮𝟯𝟺𝟻𝟼&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">regex</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /</span><span style="color:#D73A49;">^</span><span style="color:#22863A;font-weight:bold;">\p</span><span style="color:#032F62;">{Decimal_Number}</span><span style="color:#D73A49;">+$</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">regex.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;𝟏𝟐𝟑𝟜𝟝𝟞𝟩𝟪𝟫𝟬𝟭𝟮𝟯𝟺𝟻𝟼&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span></code></pre></div><p>上面代码中，属性类指定匹配所有十进制字符，可以看到各种字型的十进制字符都会匹配成功。</p><p><code>\p{Number}</code>甚至能匹配罗马数字。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 匹配所有数字</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">regex</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#85E89D;font-weight:bold;">\p</span><span style="color:#DBEDFF;">{Number}</span><span style="color:#F97583;">+$</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">regex.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;²³¹¼½¾&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">regex.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;㉛㉜㉝&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">regex.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫ&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 匹配所有数字</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">regex</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /</span><span style="color:#D73A49;">^</span><span style="color:#22863A;font-weight:bold;">\p</span><span style="color:#032F62;">{Number}</span><span style="color:#D73A49;">+$</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">regex.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;²³¹¼½¾&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#24292E;">regex.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;㉛㉜㉝&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#24292E;">regex.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫ&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span></code></pre></div><p>下面是其他一些例子。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 匹配所有空格</span></span>
<span class="line"><span style="color:#E1E4E8;">\p{White_Space}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 匹配各种文字的所有字母，等同于 Unicode 版的 \w</span></span>
<span class="line"><span style="color:#E1E4E8;">[\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}\p{Join_Control}]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 匹配各种文字的所有非字母的字符，等同于 Unicode 版的 \W</span></span>
<span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#F97583;">^</span><span style="color:#E1E4E8;">\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}\p{Join_Control}]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 匹配 Emoji</span></span>
<span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#85E89D;font-weight:bold;">\p</span><span style="color:#DBEDFF;">{Emoji_Modifier_Base}</span><span style="color:#85E89D;font-weight:bold;">\p</span><span style="color:#DBEDFF;">{Emoji_Modifier}</span><span style="color:#F97583;">?|</span><span style="color:#85E89D;font-weight:bold;">\p</span><span style="color:#DBEDFF;">{Emoji_Presentation}</span><span style="color:#F97583;">|</span><span style="color:#85E89D;font-weight:bold;">\p</span><span style="color:#DBEDFF;">{Emoji}</span><span style="color:#79B8FF;">\uFE0F</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">gu</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 匹配所有的箭头字符</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">regexArrows</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#85E89D;font-weight:bold;">\p</span><span style="color:#DBEDFF;">{Block=Arrows}</span><span style="color:#F97583;">+$</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">regexArrows.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;←↑→↓↔↕↖↗↘↙⇏⇐⇑⇒⇓⇔⇕⇖⇗⇘⇙⇧⇩&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 匹配所有空格</span></span>
<span class="line"><span style="color:#24292E;">\p{White_Space}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 匹配各种文字的所有字母，等同于 Unicode 版的 \w</span></span>
<span class="line"><span style="color:#24292E;">[\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}\p{Join_Control}]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 匹配各种文字的所有非字母的字符，等同于 Unicode 版的 \W</span></span>
<span class="line"><span style="color:#24292E;">[</span><span style="color:#D73A49;">^</span><span style="color:#24292E;">\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}\p{Join_Control}]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 匹配 Emoji</span></span>
<span class="line"><span style="color:#032F62;">/</span><span style="color:#22863A;font-weight:bold;">\p</span><span style="color:#032F62;">{Emoji_Modifier_Base}</span><span style="color:#22863A;font-weight:bold;">\p</span><span style="color:#032F62;">{Emoji_Modifier}</span><span style="color:#D73A49;">?|</span><span style="color:#22863A;font-weight:bold;">\p</span><span style="color:#032F62;">{Emoji_Presentation}</span><span style="color:#D73A49;">|</span><span style="color:#22863A;font-weight:bold;">\p</span><span style="color:#032F62;">{Emoji}</span><span style="color:#005CC5;">\uFE0F</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">gu</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 匹配所有的箭头字符</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">regexArrows</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /</span><span style="color:#D73A49;">^</span><span style="color:#22863A;font-weight:bold;">\p</span><span style="color:#032F62;">{Block=Arrows}</span><span style="color:#D73A49;">+$</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">regexArrows.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;←↑→↓↔↕↖↗↘↙⇏⇐⇑⇒⇓⇔⇕⇖⇗⇘⇙⇧⇩&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span></code></pre></div><h2 id="v-修饰符-unicode-属性类的运算" tabindex="-1">v 修饰符：Unicode 属性类的运算 <a class="header-anchor" href="#v-修饰符-unicode-属性类的运算" aria-label="Permalink to &quot;v 修饰符：Unicode 属性类的运算&quot;">​</a></h2><p>有时，需要向某个 Unicode 属性类添加或减少字符，即需要对属性类进行运算。现在有一个<a href="https://github.com/tc39/proposal-regexp-v-flag" target="_blank" rel="noreferrer">提案</a>，增加了 Unicode 属性类的运算功能。</p><p>它提供两种形式的运算，一种是差集运算（A 集合减去 B 集合），另一种是交集运算。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 差集运算（A 减去 B）</span></span>
<span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">A</span><span style="color:#F97583;">--</span><span style="color:#79B8FF;">B</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 交集运算（A 与 B 的交集）</span></span>
<span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">A</span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#79B8FF;">B</span><span style="color:#E1E4E8;">]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 差集运算（A 减去 B）</span></span>
<span class="line"><span style="color:#24292E;">[</span><span style="color:#005CC5;">A</span><span style="color:#D73A49;">--</span><span style="color:#005CC5;">B</span><span style="color:#24292E;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 交集运算（A 与 B 的交集）</span></span>
<span class="line"><span style="color:#24292E;">[</span><span style="color:#005CC5;">A</span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#005CC5;">B</span><span style="color:#24292E;">]</span></span></code></pre></div><p>上面两种写法中，A 和 B 要么是字符类（例如<code>[a-z]</code>），要么是 Unicode 属性类（例如<code>\p{ASCII}</code>）。</p><p>而且，这种运算支持方括号之中嵌入方括号，即方括号的嵌套。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 方括号嵌套的例子</span></span>
<span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">A</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">0</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;">]]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 方括号嵌套的例子</span></span>
<span class="line"><span style="color:#24292E;">[</span><span style="color:#005CC5;">A</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">0</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">9</span><span style="color:#24292E;">]]</span></span></code></pre></div><p>这种运算的前提是，正则表达式必须使用新引入的<code>v</code>修饰符。前面说过，Unicode 属性类必须搭配<code>u</code>修饰符使用，这个<code>v</code>修饰符等于代替<code>u</code>，使用了它就不必再写<code>u</code>了。</p><p>下面是一些例子。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 十进制字符去除 ASCII 码的0到9</span></span>
<span class="line"><span style="color:#E1E4E8;">[\p{Decimal_Number}</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">0</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;">]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Emoji 字符去除 ASCII 码字符</span></span>
<span class="line"><span style="color:#E1E4E8;">[\p{Emoji}</span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">\p{ASCII}]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 十进制字符去除 ASCII 码的0到9</span></span>
<span class="line"><span style="color:#24292E;">[\p{Decimal_Number}</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">0</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">9</span><span style="color:#24292E;">]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Emoji 字符去除 ASCII 码字符</span></span>
<span class="line"><span style="color:#24292E;">[\p{Emoji}</span><span style="color:#D73A49;">--</span><span style="color:#24292E;">\p{ASCII}]</span></span></code></pre></div><h2 id="具名组匹配" tabindex="-1">具名组匹配 <a class="header-anchor" href="#具名组匹配" aria-label="Permalink to &quot;具名组匹配&quot;">​</a></h2><h3 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to &quot;简介&quot;">​</a></h3><p>正则表达式使用圆括号进行组匹配。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">RE_DATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">(</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">{4}</span><span style="color:#DBEDFF;">)-(</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">{2}</span><span style="color:#DBEDFF;">)-(</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">{2}</span><span style="color:#DBEDFF;">)</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">RE_DATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /(</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">{4}</span><span style="color:#032F62;">)-(</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">)-(</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">)/</span><span style="color:#24292E;">;</span></span></code></pre></div><p>上面代码中，正则表达式里面有三组圆括号。使用<code>exec</code>方法，就可以将这三组匹配结果提取出来。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">RE_DATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">(</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">{4}</span><span style="color:#DBEDFF;">)-(</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">{2}</span><span style="color:#DBEDFF;">)-(</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">{2}</span><span style="color:#DBEDFF;">)</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">matchObj</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">RE_DATE</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;1999-12-31&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">year</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> matchObj[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">]; </span><span style="color:#6A737D;">// 1999</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">month</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> matchObj[</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">]; </span><span style="color:#6A737D;">// 12</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">day</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> matchObj[</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">]; </span><span style="color:#6A737D;">// 31</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">RE_DATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /(</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">{4}</span><span style="color:#032F62;">)-(</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">)-(</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">)/</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">matchObj</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">RE_DATE</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;1999-12-31&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">year</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> matchObj[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">]; </span><span style="color:#6A737D;">// 1999</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">month</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> matchObj[</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">]; </span><span style="color:#6A737D;">// 12</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">day</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> matchObj[</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">]; </span><span style="color:#6A737D;">// 31</span></span></code></pre></div><p>组匹配的一个问题是，每一组的匹配含义不容易看出来，而且只能用数字序号（比如<code>matchObj[1]</code>）引用，要是组的顺序变了，引用的时候就必须修改序号。</p><p>ES2018 引入了<a href="https://github.com/tc39/proposal-regexp-named-groups" target="_blank" rel="noreferrer">具名组匹配</a>（Named Capture Groups），允许为每一个组匹配指定一个名字，既便于阅读代码，又便于引用。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">RE_DATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">(?&lt;</span><span style="color:#E1E4E8;">year</span><span style="color:#DBEDFF;">&gt;</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">{4}</span><span style="color:#DBEDFF;">)-(?&lt;</span><span style="color:#E1E4E8;">month</span><span style="color:#DBEDFF;">&gt;</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">{2}</span><span style="color:#DBEDFF;">)-(?&lt;</span><span style="color:#E1E4E8;">day</span><span style="color:#DBEDFF;">&gt;</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">{2}</span><span style="color:#DBEDFF;">)</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">matchObj</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">RE_DATE</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;1999-12-31&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">year</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> matchObj.groups.year; </span><span style="color:#6A737D;">// &quot;1999&quot;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">month</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> matchObj.groups.month; </span><span style="color:#6A737D;">// &quot;12&quot;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">day</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> matchObj.groups.day; </span><span style="color:#6A737D;">// &quot;31&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">RE_DATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /(?&lt;</span><span style="color:#24292E;">year</span><span style="color:#032F62;">&gt;</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">{4}</span><span style="color:#032F62;">)-(?&lt;</span><span style="color:#24292E;">month</span><span style="color:#032F62;">&gt;</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">)-(?&lt;</span><span style="color:#24292E;">day</span><span style="color:#032F62;">&gt;</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">)/</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">matchObj</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">RE_DATE</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;1999-12-31&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">year</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> matchObj.groups.year; </span><span style="color:#6A737D;">// &quot;1999&quot;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">month</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> matchObj.groups.month; </span><span style="color:#6A737D;">// &quot;12&quot;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">day</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> matchObj.groups.day; </span><span style="color:#6A737D;">// &quot;31&quot;</span></span></code></pre></div><p>上面代码中，“具名组匹配”在圆括号内部，模式的头部添加“问号 + 尖括号 + 组名”（<code>?&lt;year&gt;</code>），然后就可以在<code>exec</code>方法返回结果的<code>groups</code>属性上引用该组名。同时，数字序号（<code>matchObj[1]</code>）依然有效。</p><p>具名组匹配等于为每一组匹配加上了 ID，便于描述匹配的目的。如果组的顺序变了，也不用改变匹配后的处理代码。</p><p>如果具名组没有匹配，那么对应的<code>groups</code>对象属性会是<code>undefined</code>。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">RE_OPT_A</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#DBEDFF;">(?&lt;</span><span style="color:#E1E4E8;">as</span><span style="color:#DBEDFF;">&gt;a</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">)</span><span style="color:#F97583;">?$</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">matchObj</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">RE_OPT_A</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">matchObj.groups.as </span><span style="color:#6A737D;">// undefined</span></span>
<span class="line"><span style="color:#9ECBFF;">&#39;as&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> matchObj.groups </span><span style="color:#6A737D;">// true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">RE_OPT_A</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /</span><span style="color:#D73A49;">^</span><span style="color:#032F62;">(?&lt;</span><span style="color:#24292E;">as</span><span style="color:#032F62;">&gt;a</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">)</span><span style="color:#D73A49;">?$</span><span style="color:#032F62;">/</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">matchObj</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">RE_OPT_A</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">matchObj.groups.as </span><span style="color:#6A737D;">// undefined</span></span>
<span class="line"><span style="color:#032F62;">&#39;as&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> matchObj.groups </span><span style="color:#6A737D;">// true</span></span></code></pre></div><p>上面代码中，具名组<code>as</code>没有找到匹配，那么<code>matchObj.groups.as</code>属性值就是<code>undefined</code>，并且<code>as</code>这个键名在<code>groups</code>是始终存在的。</p><h3 id="解构赋值和替换" tabindex="-1">解构赋值和替换 <a class="header-anchor" href="#解构赋值和替换" aria-label="Permalink to &quot;解构赋值和替换&quot;">​</a></h3><p>有了具名组匹配以后，可以使用解构赋值直接从匹配结果上为变量赋值。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> {</span><span style="color:#FFAB70;">groups</span><span style="color:#E1E4E8;">: {one, two}} </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#DBEDFF;">(?&lt;</span><span style="color:#E1E4E8;">one</span><span style="color:#DBEDFF;">&gt;</span><span style="color:#79B8FF;">.</span><span style="color:#F97583;">*</span><span style="color:#DBEDFF;">):(?&lt;</span><span style="color:#E1E4E8;">two</span><span style="color:#DBEDFF;">&gt;</span><span style="color:#79B8FF;">.</span><span style="color:#F97583;">*</span><span style="color:#DBEDFF;">)</span><span style="color:#F97583;">$</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;foo:bar&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">one  </span><span style="color:#6A737D;">// foo</span></span>
<span class="line"><span style="color:#E1E4E8;">two  </span><span style="color:#6A737D;">// bar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> {</span><span style="color:#E36209;">groups</span><span style="color:#24292E;">: {one, two}} </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /</span><span style="color:#D73A49;">^</span><span style="color:#032F62;">(?&lt;</span><span style="color:#24292E;">one</span><span style="color:#032F62;">&gt;</span><span style="color:#005CC5;">.</span><span style="color:#D73A49;">*</span><span style="color:#032F62;">):(?&lt;</span><span style="color:#24292E;">two</span><span style="color:#032F62;">&gt;</span><span style="color:#005CC5;">.</span><span style="color:#D73A49;">*</span><span style="color:#032F62;">)</span><span style="color:#D73A49;">$</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;foo:bar&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">one  </span><span style="color:#6A737D;">// foo</span></span>
<span class="line"><span style="color:#24292E;">two  </span><span style="color:#6A737D;">// bar</span></span></code></pre></div><p>字符串替换时，使用<code>$&lt;组名&gt;</code>引用具名组。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> re </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">(?&lt;</span><span style="color:#E1E4E8;">year</span><span style="color:#DBEDFF;">&gt;</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">{4}</span><span style="color:#DBEDFF;">)-(?&lt;</span><span style="color:#E1E4E8;">month</span><span style="color:#DBEDFF;">&gt;</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">{2}</span><span style="color:#DBEDFF;">)-(?&lt;</span><span style="color:#E1E4E8;">day</span><span style="color:#DBEDFF;">&gt;</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">{2}</span><span style="color:#DBEDFF;">)</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">u</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">&#39;2015-01-02&#39;</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;">(re, </span><span style="color:#9ECBFF;">&#39;$&lt;day&gt;/$&lt;month&gt;/$&lt;year&gt;&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;">// &#39;02/01/2015&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> re </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /(?&lt;</span><span style="color:#24292E;">year</span><span style="color:#032F62;">&gt;</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">{4}</span><span style="color:#032F62;">)-(?&lt;</span><span style="color:#24292E;">month</span><span style="color:#032F62;">&gt;</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">)-(?&lt;</span><span style="color:#24292E;">day</span><span style="color:#032F62;">&gt;</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">{2}</span><span style="color:#032F62;">)/</span><span style="color:#D73A49;">u</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">&#39;2015-01-02&#39;</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">replace</span><span style="color:#24292E;">(re, </span><span style="color:#032F62;">&#39;$&lt;day&gt;/$&lt;month&gt;/$&lt;year&gt;&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;">// &#39;02/01/2015&#39;</span></span></code></pre></div><p>上面代码中，<code>replace</code>方法的第二个参数是一个字符串，而不是正则表达式。</p><p><code>replace</code>方法的第二个参数也可以是函数，该函数的参数序列如下。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">&#39;2015-01-02&#39;</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;">(re, (</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#FFAB70;">matched</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 整个匹配结果 2015-01-02</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#FFAB70;">capture1</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 第一个组匹配 2015</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#FFAB70;">capture2</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 第二个组匹配 01</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#FFAB70;">capture3</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 第三个组匹配 02</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#FFAB70;">position</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 匹配开始的位置 0</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#FFAB70;">S</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 原字符串 2015-01-02</span></span>
<span class="line"><span style="color:#E1E4E8;">   groups </span><span style="color:#6A737D;">// 具名组构成的一个对象 {year, month, day}</span></span>
<span class="line"><span style="color:#E1E4E8;"> ) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> {day, month, year} </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> groups;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">`${</span><span style="color:#E1E4E8;">day</span><span style="color:#9ECBFF;">}/${</span><span style="color:#E1E4E8;">month</span><span style="color:#9ECBFF;">}/${</span><span style="color:#E1E4E8;">year</span><span style="color:#9ECBFF;">}`</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">&#39;2015-01-02&#39;</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">replace</span><span style="color:#24292E;">(re, (</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#E36209;">matched</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 整个匹配结果 2015-01-02</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#E36209;">capture1</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 第一个组匹配 2015</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#E36209;">capture2</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 第二个组匹配 01</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#E36209;">capture3</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 第三个组匹配 02</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#E36209;">position</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 匹配开始的位置 0</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#E36209;">S</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 原字符串 2015-01-02</span></span>
<span class="line"><span style="color:#24292E;">   groups </span><span style="color:#6A737D;">// 具名组构成的一个对象 {year, month, day}</span></span>
<span class="line"><span style="color:#24292E;"> ) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> {day, month, year} </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> groups;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#032F62;">`${</span><span style="color:#24292E;">day</span><span style="color:#032F62;">}/${</span><span style="color:#24292E;">month</span><span style="color:#032F62;">}/${</span><span style="color:#24292E;">year</span><span style="color:#032F62;">}`</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre></div><p>具名组匹配在原来的基础上，新增了最后一个函数参数：具名组构成的一个对象。函数内部可以直接对这个对象进行解构赋值。</p><h3 id="引用" tabindex="-1">引用 <a class="header-anchor" href="#引用" aria-label="Permalink to &quot;引用&quot;">​</a></h3><p>如果要在正则表达式内部引用某个“具名组匹配”，可以使用<code>\k&lt;组名&gt;</code>的写法。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">RE_TWICE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#DBEDFF;">(?&lt;</span><span style="color:#E1E4E8;">word</span><span style="color:#DBEDFF;">&gt;</span><span style="color:#79B8FF;">[a-z]</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">)!</span><span style="color:#F97583;">\k&lt;</span><span style="color:#E1E4E8;">word</span><span style="color:#F97583;">&gt;$</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#79B8FF;">RE_TWICE</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;abc!abc&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#79B8FF;">RE_TWICE</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;abc!ab&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// false</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">RE_TWICE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /</span><span style="color:#D73A49;">^</span><span style="color:#032F62;">(?&lt;</span><span style="color:#24292E;">word</span><span style="color:#032F62;">&gt;</span><span style="color:#005CC5;">[a-z]</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">)!</span><span style="color:#D73A49;">\k&lt;</span><span style="color:#24292E;">word</span><span style="color:#D73A49;">&gt;$</span><span style="color:#032F62;">/</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#005CC5;">RE_TWICE</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;abc!abc&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#005CC5;">RE_TWICE</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;abc!ab&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// false</span></span></code></pre></div><p>数字引用（<code>\1</code>）依然有效。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">RE_TWICE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#DBEDFF;">(?&lt;</span><span style="color:#E1E4E8;">word</span><span style="color:#DBEDFF;">&gt;</span><span style="color:#79B8FF;">[a-z]</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">)!</span><span style="color:#F97583;">\1$</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#79B8FF;">RE_TWICE</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;abc!abc&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#79B8FF;">RE_TWICE</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;abc!ab&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// false</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">RE_TWICE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /</span><span style="color:#D73A49;">^</span><span style="color:#032F62;">(?&lt;</span><span style="color:#24292E;">word</span><span style="color:#032F62;">&gt;</span><span style="color:#005CC5;">[a-z]</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">)!</span><span style="color:#D73A49;">\1$</span><span style="color:#032F62;">/</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#005CC5;">RE_TWICE</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;abc!abc&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#005CC5;">RE_TWICE</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;abc!ab&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// false</span></span></code></pre></div><p>这两种引用语法还可以同时使用。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">RE_TWICE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#DBEDFF;">(?&lt;</span><span style="color:#E1E4E8;">word</span><span style="color:#DBEDFF;">&gt;</span><span style="color:#79B8FF;">[a-z]</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">)!</span><span style="color:#F97583;">\k&lt;</span><span style="color:#E1E4E8;">word</span><span style="color:#F97583;">&gt;</span><span style="color:#DBEDFF;">!</span><span style="color:#F97583;">\1$</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#79B8FF;">RE_TWICE</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;abc!abc!abc&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#79B8FF;">RE_TWICE</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;abc!abc!ab&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// false</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">RE_TWICE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /</span><span style="color:#D73A49;">^</span><span style="color:#032F62;">(?&lt;</span><span style="color:#24292E;">word</span><span style="color:#032F62;">&gt;</span><span style="color:#005CC5;">[a-z]</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">)!</span><span style="color:#D73A49;">\k&lt;</span><span style="color:#24292E;">word</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">!</span><span style="color:#D73A49;">\1$</span><span style="color:#032F62;">/</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#005CC5;">RE_TWICE</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;abc!abc!abc&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#005CC5;">RE_TWICE</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;abc!abc!ab&#39;</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// false</span></span></code></pre></div><h2 id="d-修饰符-正则匹配索引" tabindex="-1">d 修饰符：正则匹配索引 <a class="header-anchor" href="#d-修饰符-正则匹配索引" aria-label="Permalink to &quot;d 修饰符：正则匹配索引&quot;">​</a></h2><p>组匹配的结果，在原始字符串里面的开始位置和结束位置，目前获取并不是很方便。正则实例的<code>exec()</code>方法有一个<code>index</code>属性，可以获取整个匹配结果的开始位置。但是，组匹配的每个组的开始位置，很难拿到。</p><p><a href="https://github.com/tc39/proposal-regexp-match-Indices" target="_blank" rel="noreferrer">ES2022</a> 新增了<code>d</code>修饰符，这个修饰符可以让<code>exec()</code>、<code>match()</code>的返回结果添加<code>indices</code>属性，在该属性上面可以拿到匹配的开始位置和结束位置。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">text</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;zabbcdef&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">re</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">ab</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">d</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">result</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">result.index </span><span style="color:#6A737D;">// 1</span></span>
<span class="line"><span style="color:#E1E4E8;">result.indices </span><span style="color:#6A737D;">// [ [1, 3] ]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">text</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;zabbcdef&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">re</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /ab/</span><span style="color:#D73A49;">d</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">result</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> re.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">result.index </span><span style="color:#6A737D;">// 1</span></span>
<span class="line"><span style="color:#24292E;">result.indices </span><span style="color:#6A737D;">// [ [1, 3] ]</span></span></code></pre></div><p>上面示例中，<code>exec()</code>方法的返回结果<code>result</code>，它的<code>index</code>属性是整个匹配结果（<code>ab</code>）的开始位置。由于正则表达式<code>re</code>有<code>d</code>修饰符，<code>result</code>现在就会多出一个<code>indices</code>属性。该属性是一个数组，它的每个成员还是一个数组，包含了匹配结果在原始字符串的开始位置和结束位置。由于上例的正则表达式<code>re</code>没有包含组匹配，所以<code>indices</code>数组只有一个成员，表示整个匹配的开始位置是<code>1</code>，结束位置是<code>3</code>。</p><p>注意，开始位置包含在匹配结果之中，相当于匹配结果的第一个字符的位置。但是，结束位置不包含在匹配结果之中，是匹配结果的下一个字符。比如，上例匹配结果的最后一个字符<code>b</code>的位置，是原始字符串的2号位，那么结束位置<code>3</code>就是下一个字符的位置。</p><p>如果正则表达式包含组匹配，那么<code>indices</code>属性对应的数组就会包含多个成员，提供每个组匹配的开始位置和结束位置。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">text</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;zabbcdef&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">re</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">ab</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">(cd)</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">d</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">result</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">result.indices </span><span style="color:#6A737D;">// [ [ 1, 6 ], [ 4, 6 ] ]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">text</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;zabbcdef&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">re</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /ab</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">(cd)/</span><span style="color:#D73A49;">d</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">result</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> re.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">result.indices </span><span style="color:#6A737D;">// [ [ 1, 6 ], [ 4, 6 ] ]</span></span></code></pre></div><p>上面例子中，正则表达式<code>re</code>包含一个组匹配<code>(cd)</code>，那么<code>indices</code>属性数组就有两个成员，第一个成员是整个匹配结果（<code>abbcd</code>）的开始位置和结束位置，第二个成员是组匹配（<code>cd</code>）的开始位置和结束位置。</p><p>下面是多个组匹配的例子。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">text</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;zabbcdef&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">re</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">ab</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">(cd(ef))</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">d</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">result</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">result.indices </span><span style="color:#6A737D;">// [ [1, 8], [4, 8], [6, 8] ]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">text</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;zabbcdef&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">re</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/ab</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">(cd(ef))/</span><span style="color:#D73A49;">d</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">result</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> re.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">result.indices </span><span style="color:#6A737D;">// [ [1, 8], [4, 8], [6, 8] ]</span></span></code></pre></div><p>上面例子中，正则表达式<code>re</code>包含两个组匹配，所以<code>indices</code>属性数组就有三个成员。</p><p>如果正则表达式包含具名组匹配，<code>indices</code>属性数组还会有一个<code>groups</code>属性。该属性是一个对象，可以从该对象获取具名组匹配的开始位置和结束位置。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">text</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;zabbcdef&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">re</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">ab</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">(?&lt;</span><span style="color:#E1E4E8;">Z</span><span style="color:#DBEDFF;">&gt;cd)</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">d</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">result</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">result.indices.groups </span><span style="color:#6A737D;">// { Z: [ 4, 6 ] }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">text</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;zabbcdef&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">re</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /ab</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">(?&lt;</span><span style="color:#24292E;">Z</span><span style="color:#032F62;">&gt;cd)/</span><span style="color:#D73A49;">d</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">result</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> re.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">result.indices.groups </span><span style="color:#6A737D;">// { Z: [ 4, 6 ] }</span></span></code></pre></div><p>上面例子中，<code>exec()</code>方法返回结果的<code>indices.groups</code>属性是一个对象，提供具名组匹配<code>Z</code>的开始位置和结束位置。</p><p>如果获取组匹配不成功，<code>indices</code>属性数组的对应成员则为<code>undefined</code>，<code>indices.groups</code>属性对象的对应成员也是<code>undefined</code>。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">text</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;zabbcdef&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">re</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">ab</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">(?&lt;</span><span style="color:#E1E4E8;">Z</span><span style="color:#DBEDFF;">&gt;ce)</span><span style="color:#F97583;">?</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">d</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">result</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">result.indices[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">] </span><span style="color:#6A737D;">// undefined</span></span>
<span class="line"><span style="color:#E1E4E8;">result.indices.groups[</span><span style="color:#9ECBFF;">&#39;Z&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#6A737D;">// undefined</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">text</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;zabbcdef&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">re</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> /ab</span><span style="color:#D73A49;">+</span><span style="color:#032F62;">(?&lt;</span><span style="color:#24292E;">Z</span><span style="color:#032F62;">&gt;ce)</span><span style="color:#D73A49;">?</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">d</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">result</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> re.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">result.indices[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">] </span><span style="color:#6A737D;">// undefined</span></span>
<span class="line"><span style="color:#24292E;">result.indices.groups[</span><span style="color:#032F62;">&#39;Z&#39;</span><span style="color:#24292E;">] </span><span style="color:#6A737D;">// undefined</span></span></code></pre></div><p>上面例子中，由于组匹配<code>ce</code>不成功，所以<code>indices</code>属性数组和<code>indices.groups</code>属性对象对应的组匹配成员<code>Z</code>都是<code>undefined</code>。</p><h2 id="string-prototype-matchall" tabindex="-1">String.prototype.matchAll() <a class="header-anchor" href="#string-prototype-matchall" aria-label="Permalink to &quot;String.prototype.matchAll()&quot;">​</a></h2><p>如果一个正则表达式在字符串里面有多个匹配，现在一般使用<code>g</code>修饰符或<code>y</code>修饰符，在循环里面逐一取出。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> regex </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">t(e)(st(</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">?</span><span style="color:#DBEDFF;">))</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">g</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> string </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;test1test2test3&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> matches </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [];</span></span>
<span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> match;</span></span>
<span class="line"><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (match </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> regex.</span><span style="color:#B392F0;">exec</span><span style="color:#E1E4E8;">(string)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  matches.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(match);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">matches</span></span>
<span class="line"><span style="color:#6A737D;">// [</span></span>
<span class="line"><span style="color:#6A737D;">//   [&quot;test1&quot;, &quot;e&quot;, &quot;st1&quot;, &quot;1&quot;, index: 0, input: &quot;test1test2test3&quot;],</span></span>
<span class="line"><span style="color:#6A737D;">//   [&quot;test2&quot;, &quot;e&quot;, &quot;st2&quot;, &quot;2&quot;, index: 5, input: &quot;test1test2test3&quot;],</span></span>
<span class="line"><span style="color:#6A737D;">//   [&quot;test3&quot;, &quot;e&quot;, &quot;st3&quot;, &quot;3&quot;, index: 10, input: &quot;test1test2test3&quot;]</span></span>
<span class="line"><span style="color:#6A737D;">// ]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> regex </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/t(e)(st(</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">?</span><span style="color:#032F62;">))/</span><span style="color:#D73A49;">g</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> string </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;test1test2test3&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> matches </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [];</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> match;</span></span>
<span class="line"><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (match </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> regex.</span><span style="color:#6F42C1;">exec</span><span style="color:#24292E;">(string)) {</span></span>
<span class="line"><span style="color:#24292E;">  matches.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(match);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">matches</span></span>
<span class="line"><span style="color:#6A737D;">// [</span></span>
<span class="line"><span style="color:#6A737D;">//   [&quot;test1&quot;, &quot;e&quot;, &quot;st1&quot;, &quot;1&quot;, index: 0, input: &quot;test1test2test3&quot;],</span></span>
<span class="line"><span style="color:#6A737D;">//   [&quot;test2&quot;, &quot;e&quot;, &quot;st2&quot;, &quot;2&quot;, index: 5, input: &quot;test1test2test3&quot;],</span></span>
<span class="line"><span style="color:#6A737D;">//   [&quot;test3&quot;, &quot;e&quot;, &quot;st3&quot;, &quot;3&quot;, index: 10, input: &quot;test1test2test3&quot;]</span></span>
<span class="line"><span style="color:#6A737D;">// ]</span></span></code></pre></div><p>上面代码中，<code>while</code>循环取出每一轮的正则匹配，一共三轮。</p><p><a href="https://github.com/tc39/proposal-string-matchall" target="_blank" rel="noreferrer">ES2020</a> 增加了<code>String.prototype.matchAll()</code>方法，可以一次性取出所有匹配。不过，它返回的是一个遍历器（Iterator），而不是数组。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;test1test2test3&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">regex</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">t(e)(st(</span><span style="color:#79B8FF;">\d</span><span style="color:#F97583;">?</span><span style="color:#DBEDFF;">))</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">g</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">match</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">of</span><span style="color:#E1E4E8;"> string.</span><span style="color:#B392F0;">matchAll</span><span style="color:#E1E4E8;">(regex)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(match);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#6A737D;">// [&quot;test1&quot;, &quot;e&quot;, &quot;st1&quot;, &quot;1&quot;, index: 0, input: &quot;test1test2test3&quot;]</span></span>
<span class="line"><span style="color:#6A737D;">// [&quot;test2&quot;, &quot;e&quot;, &quot;st2&quot;, &quot;2&quot;, index: 5, input: &quot;test1test2test3&quot;]</span></span>
<span class="line"><span style="color:#6A737D;">// [&quot;test3&quot;, &quot;e&quot;, &quot;st3&quot;, &quot;3&quot;, index: 10, input: &quot;test1test2test3&quot;]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">string</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;test1test2test3&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">regex</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/t(e)(st(</span><span style="color:#005CC5;">\d</span><span style="color:#D73A49;">?</span><span style="color:#032F62;">))/</span><span style="color:#D73A49;">g</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">match</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">of</span><span style="color:#24292E;"> string.</span><span style="color:#6F42C1;">matchAll</span><span style="color:#24292E;">(regex)) {</span></span>
<span class="line"><span style="color:#24292E;">  console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(match);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#6A737D;">// [&quot;test1&quot;, &quot;e&quot;, &quot;st1&quot;, &quot;1&quot;, index: 0, input: &quot;test1test2test3&quot;]</span></span>
<span class="line"><span style="color:#6A737D;">// [&quot;test2&quot;, &quot;e&quot;, &quot;st2&quot;, &quot;2&quot;, index: 5, input: &quot;test1test2test3&quot;]</span></span>
<span class="line"><span style="color:#6A737D;">// [&quot;test3&quot;, &quot;e&quot;, &quot;st3&quot;, &quot;3&quot;, index: 10, input: &quot;test1test2test3&quot;]</span></span></code></pre></div><p>上面代码中，由于<code>string.matchAll(regex)</code>返回的是遍历器，所以可以用<code>for...of</code>循环取出。相对于返回数组，返回遍历器的好处在于，如果匹配结果是一个很大的数组，那么遍历器比较节省资源。</p><p>遍历器转为数组是非常简单的，使用<code>...</code>运算符和<code>Array.from()</code>方法就可以了。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// 转为数组的方法一</span></span>
<span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">string.</span><span style="color:#B392F0;">matchAll</span><span style="color:#E1E4E8;">(regex)]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 转为数组的方法二</span></span>
<span class="line"><span style="color:#E1E4E8;">Array.</span><span style="color:#B392F0;">from</span><span style="color:#E1E4E8;">(string.</span><span style="color:#B392F0;">matchAll</span><span style="color:#E1E4E8;">(regex))</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// 转为数组的方法一</span></span>
<span class="line"><span style="color:#24292E;">[</span><span style="color:#D73A49;">...</span><span style="color:#24292E;">string.</span><span style="color:#6F42C1;">matchAll</span><span style="color:#24292E;">(regex)]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 转为数组的方法二</span></span>
<span class="line"><span style="color:#24292E;">Array.</span><span style="color:#6F42C1;">from</span><span style="color:#24292E;">(string.</span><span style="color:#6F42C1;">matchAll</span><span style="color:#24292E;">(regex))</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-a3c25e27 data-v-a2d931e4><!--[--><!--]--><!----><nav class="prev-next" data-v-a2d931e4><div class="pager" data-v-a2d931e4><a class="pager-link prev" href="/es6/string-methods.html" data-v-a2d931e4><span class="desc" data-v-a2d931e4>Previous page</span><span class="title" data-v-a2d931e4>字符串的新增方法</span></a></div><div class="pager" data-v-a2d931e4><a class="pager-link next" href="/es6/number.html" data-v-a2d931e4><span class="desc" data-v-a2d931e4>Next page</span><span class="title" data-v-a2d931e4>数值的扩展</span></a></div></nav></footer><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-eb443a73 data-v-e4279f1c><div class="container" data-v-e4279f1c><p class="message" data-v-e4279f1c>Released under the MIT License.</p><p class="copyright" data-v-e4279f1c>Copyright © 2023 shangwenhe.github.io from  https://github.com/wangdoc/</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"readme.md\":\"f5363f13\",\"es6_acknowledgment.md\":\"f85ade72\",\"api-examples.md\":\"487591de\",\"es6_array.md\":\"51e9deb6\",\"es6_arraybuffer.md\":\"f44fd413\",\"es6_async-iterator.md\":\"0d03c330\",\"es6_async.md\":\"83bad4fa\",\"es6_class-extends.md\":\"5d8578d4\",\"es6_class.md\":\"52bc83d6\",\"es6_destructuring.md\":\"b71184b8\",\"es6_fp.md\":\"aab04c55\",\"es6_decorator.md\":\"a3f44c64\",\"es6_generator-async.md\":\"ba8bde49\",\"es6_function.md\":\"e1529934\",\"es6_intro.md\":\"5a71de14\",\"es6_mixin.md\":\"fa948741\",\"es6_iterator.md\":\"86ba01d6\",\"es6_let.md\":\"b2b2b095\",\"es6_module-loader.md\":\"42b89009\",\"es6_generator.md\":\"21faab15\",\"es6_module.md\":\"b4adaffb\",\"es6_number.md\":\"5ad9ca99\",\"es6_object-methods.md\":\"ab68f698\",\"es6_object.md\":\"c89bf871\",\"es6_operator.md\":\"06a1883b\",\"es6_proposals.md\":\"e238fbee\",\"es6_promise.md\":\"525d5eff\",\"es6_reference.md\":\"369e968b\",\"es6_proxy.md\":\"04574ebf\",\"es6_reflect.md\":\"c0a3a1e0\",\"es6_regex.md\":\"03432ef1\",\"es6_spec.md\":\"5f86a3b5\",\"es6_string-methods.md\":\"db9669e5\",\"es6_simd.md\":\"cf5a5c61\",\"es6_set-map.md\":\"f9037349\",\"es6_string.md\":\"eb5f9603\",\"guide_index.md\":\"4eb864cb\",\"guide_getting-started.md\":\"7129cc86\",\"index.md\":\"80011d17\",\"es6_style.md\":\"d1095c27\",\"js_async_general.md\":\"173e2810\",\"js_async_promise.md\":\"362d922a\",\"es6_symbol.md\":\"fb14bfa0\",\"js_basic_history.md\":\"fa858ec9\",\"js_basic_introduction.md\":\"5a9a42c2\",\"js_bom_cookie.md\":\"488432dc\",\"js_bom_cors.md\":\"9d854e83\",\"js_bom_file.md\":\"d332cf36\",\"js_async_timer.md\":\"861a9317\",\"js_bom_arraybuffer.md\":\"cd9b3bc9\",\"js_bom_engine.md\":\"7a79598b\",\"js_basic_grammar.md\":\"9434216d\",\"js_bom_history.md\":\"0bf8110f\",\"js_bom_form.md\":\"6e6eacf6\",\"js_bom_navigator.md\":\"2eec4304\",\"js_bom_location.md\":\"1d2970a2\",\"js_bom_storage.md\":\"3df0575b\",\"js_bom_same-origin.md\":\"1a38794e\",\"js_bom_indexeddb.md\":\"d2f85ba6\",\"js_bom_webworker.md\":\"fc4f9b92\",\"js_bom_window.md\":\"6ee6e83d\",\"js_dom_attributes.md\":\"702887b9\",\"js_dom_general.md\":\"3fa77773\",\"js_dom_css.md\":\"3b65db90\",\"js_bom_xmlhttprequest.md\":\"27984567\",\"js_dom_element.md\":\"0c8ae837\",\"js_dom_mutationobserver.md\":\"0a15be6a\",\"js_dom_document.md\":\"24f09af8\",\"js_dom_parentnode.md\":\"43956f7e\",\"js_dom_nodelist.md\":\"e4afcbdf\",\"js_dom_node.md\":\"3595a046\",\"js_elements_form.md\":\"3e8bc521\",\"js_elements_button.md\":\"bc97927d\",\"js_elements_option.md\":\"b576d9fc\",\"js_elements_a.md\":\"2482f40c\",\"js_elements_video.md\":\"1c67d862\",\"js_elements_input.md\":\"41328992\",\"js_dom_text.md\":\"5cfb0399\",\"js_elements_image.md\":\"79df0a33\",\"js_events_common.md\":\"8d12bc8f\",\"js_events_globaleventhandlers.md\":\"5d2a4cd8\",\"js_events_keyboard.md\":\"71363e66\",\"js_events_eventtarget.md\":\"e67cc947\",\"js_events_form.md\":\"705c7260\",\"js_events_drag.md\":\"2dfa53da\",\"js_events_event.md\":\"00b46a6b\",\"js_events_model.md\":\"bb2121f7\",\"js_events_mouse.md\":\"384ed1b0\",\"js_events_progress.md\":\"5d985ea2\",\"js_events_touch.md\":\"01dad1c0\",\"js_features_console.md\":\"eaab4553\",\"js_features_conversion.md\":\"5fe30031\",\"js_features_error.md\":\"ecb2048e\",\"js_oop_new.md\":\"43b8337a\",\"js_features_style.md\":\"c66671d8\",\"js_oop_object.md\":\"4f2339f0\",\"js_oop_strict.md\":\"2bd9bbc1\",\"js_oop_prototype.md\":\"9f496dba\",\"js_operators_arithmetic.md\":\"2ec440e4\",\"js_operators_boolean.md\":\"df33d199\",\"js_operators_bit.md\":\"e3a99794\",\"js_preface.md\":\"90c3b8d3\",\"js_oop_this.md\":\"b85c242a\",\"js_operators_priority.md\":\"f08b9151\",\"js_operators_comparison.md\":\"d4ba9042\",\"js_stdlib_boolean.md\":\"40444141\",\"js_stdlib_array.md\":\"668e5426\",\"js_stdlib_attributes.md\":\"9415340c\",\"js_stdlib_date.md\":\"17a1462f\",\"js_stdlib_math.md\":\"6146f9d7\",\"js_stdlib_json.md\":\"7901877a\",\"js_stdlib_number.md\":\"b8171ec9\",\"js_stdlib_object.md\":\"387a3094\",\"js_stdlib_string.md\":\"d7dbf530\",\"js_stdlib_wrapper.md\":\"97393cfd\",\"js_stdlib_regexp.md\":\"5b3be1cd\",\"js_types_array.md\":\"f33ce41f\",\"js_types_general.md\":\"10108773\",\"js_types_null-undefined-boolean.md\":\"cbf2c42f\",\"js_types_function.md\":\"b02c3af6\",\"js_types_number.md\":\"72be343b\",\"markdown-examples.md\":\"cc5bb73c\",\"js_types_object.md\":\"dabc4c49\",\"js_types_string.md\":\"e6e673b9\",\"ts_any.md\":\"b44b22a7\",\"ts_array.md\":\"e16f3961\",\"ts_basic.md\":\"abe3c10c\",\"ts_assert.md\":\"30278027\",\"ts_comment.md\":\"71b8f1fd\",\"ts_d.ts.md\":\"79b3c76a\",\"ts_declare.md\":\"c16b80fb\",\"ts_class.md\":\"90c0c784\",\"ts_decorator-legacy.md\":\"71011b1c\",\"ts_es6.md\":\"373865a4\",\"ts_decorator.md\":\"3bfde1fb\",\"ts_enum.md\":\"59fb2103\",\"ts_intro.md\":\"56777108\",\"ts_function.md\":\"7259d58d\",\"ts_mapping.md\":\"c54d93d6\",\"ts_generics.md\":\"9a960a2b\",\"ts_module.md\":\"507642fb\",\"ts_npm.md\":\"468cb28a\",\"ts_interface.md\":\"588cef4f\",\"ts_namespace.md\":\"ee5516ef\",\"ts_narrowing.md\":\"e3484292\",\"ts_tsc.md\":\"b7ad3706\",\"ts_react.md\":\"47920b5c\",\"ts_symbol.md\":\"1d9e19e8\",\"ts_object.md\":\"48cb7d4e\",\"ts_operator.md\":\"b0882c63\",\"ts_tsconfig.json.md\":\"6a4c5a16\",\"ts_tuple.md\":\"f6d8c103\",\"ts_type-operations.md\":\"1d7016a8\",\"ts_types.md\":\"4011f363\",\"ts_utility.md\":\"37f3ec2f\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"Front End\",\"description\":\"A VitePress site\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"Front End\",\"nav\":[{\"text\":\"TypeScript\",\"link\":\"/ts/intro.html\"},{\"text\":\"JavaScript\",\"link\":\"/js/basic/introduction.html\"},{\"text\":\"ES6\",\"link\":\"/es6/intro.html\"},{\"text\":\"相关资料\",\"link\":\"https://github.com/wangdoc\",\"target\":\"_blank\",\"rel\":\"wangdoc\"}],\"sidebar\":{\"/ts\":{\"text\":\"TypeScript\",\"collapsed\":false,\"items\":[{\"text\":\"简介\",\"link\":\"/ts/intro.html\"},{\"text\":\"基本用法\",\"link\":\"/ts/basic.html\"},{\"text\":\"any 类型\",\"link\":\"/ts/any.html\"},{\"text\":\"类型系统\",\"link\":\"/ts/types.html\"},{\"text\":\"数组\",\"link\":\"/ts/array.html\"},{\"text\":\"元组\",\"link\":\"/ts/tuple.html\"},{\"text\":\"symbol 类型\",\"link\":\"/ts/symbol.html\"},{\"text\":\"函数\",\"link\":\"/ts/function.html\"},{\"text\":\"对象\",\"link\":\"/ts/object.html\"},{\"text\":\"类/泛型\",\"collapsed\":false,\"items\":[{\"text\":\"interface\",\"link\":\"/ts/interface.html\"},{\"text\":\"类\",\"link\":\"/ts/class.html\"},{\"text\":\"泛型\",\"link\":\"/ts/generics.html\"},{\"text\":\"Enum 类型\",\"link\":\"/ts/enum.html\"},{\"text\":\"类型断言\",\"link\":\"/ts/assert.html\"}]},{\"text\":\"模块/装饰器\",\"collapsed\":false,\"items\":[{\"text\":\"模块\",\"link\":\"/ts/module.html\"},{\"text\":\"namespace\",\"link\":\"/ts/namespace.html\"},{\"text\":\"装饰器\",\"link\":\"/ts/decorator.html\"},{\"text\":\"装饰器（旧语法）\",\"link\":\"/ts/decorator-legacy.html\"},{\"text\":\"declare 关键字\",\"link\":\"/ts/declare.html\"},{\"text\":\"d.ts 类型声明文件\",\"link\":\"/ts/d.ts.html\"}]},{\"text\":\"类型运算\",\"collapsed\":false,\"items\":[{\"text\":\"类型运算符\",\"link\":\"/ts/operator.html\"},{\"text\":\"类型映射\",\"link\":\"/ts/mapping.html\"},{\"text\":\"类型工具\",\"link\":\"/ts/utility.html\"},{\"text\":\"注释指令\",\"link\":\"/ts/comment.html\"}]},{\"text\":\"其他\",\"collapsed\":false,\"items\":[{\"text\":\"tsconfig.json 文件\",\"link\":\"/ts/tsconfig.json.html\"},{\"text\":\"tsc 命令\",\"link\":\"/ts/tsc.html\"}]}]},\"/js\":{\"text\":\"Javascript\",\"collapsed\":false,\"items\":[{\"text\":\"入门篇\",\"collapsed\":false,\"items\":[{\"text\":\"导论\",\"link\":\"/js/basic/introduction.html\"},{\"text\":\"历史\",\"link\":\"/js/basic/history.html\"},{\"text\":\"基本语法\",\"link\":\"/js/basic/grammar.html\"}]},{\"text\":\"数据类型\",\"collapsed\":false,\"items\":[{\"text\":\"概述\",\"link\":\"/js/types/general.html\"},{\"text\":\"null，undefined 和布尔值\",\"link\":\"/js/types/null-undefined-boolean.html\"},{\"text\":\"数值\",\"link\":\"/js/types/number.html\"},{\"text\":\"字符串\",\"link\":\"/js/types/string.html\"},{\"text\":\"对象\",\"link\":\"/js/types/object.html\"},{\"text\":\"函数\",\"link\":\"/js/types/function.html\"},{\"text\":\"数组\",\"link\":\"/js/types/array.html\"}]},{\"text\":\"运算符\",\"collapsed\":false,\"items\":[{\"text\":\"算术运算符\",\"link\":\"/js/operators/arithmetic.html\"},{\"text\":\"比较运算符\",\"link\":\"/js/operators/comparison.html\"},{\"text\":\"布尔运算符\",\"link\":\"/js/operators/boolean.html\"},{\"text\":\"二进制位运算符\",\"link\":\"/js/operators/bit.html\"},{\"text\":\"其他运算符，运算顺序\",\"link\":\"/js/operators/priority.html\"}]},{\"text\":\"语法专题\",\"collapsed\":false,\"items\":[{\"text\":\"数据类型的转换\",\"link\":\"/js/features/conversion.html\"},{\"text\":\"错误处理机制\",\"link\":\"/js/features/error.html\"},{\"text\":\"编程风格\",\"link\":\"/js/features/style.html\"},{\"text\":\"console 对象与控制台\",\"link\":\"/js/features/console.html\"}]},{\"text\":\"标准库\",\"collapsed\":false,\"items\":[{\"text\":\"Object 对象\",\"link\":\"/js/stdlib/object.html\"},{\"text\":\"属性描述对象\",\"link\":\"/js/stdlib/attributes.html\"},{\"text\":\"Array 对象\",\"link\":\"/js/stdlib/array.html\"},{\"text\":\"包装对象\",\"link\":\"/js/stdlib/wrapper.html\"},{\"text\":\"Boolean 对象\",\"link\":\"/js/stdlib/boolean.html\"},{\"text\":\"Number 对象\",\"link\":\"/js/stdlib/number.html\"},{\"text\":\"String 对象\",\"link\":\"/js/stdlib/string.html\"},{\"text\":\"Math 对象\",\"link\":\"/js/stdlib/math.html\"},{\"text\":\"Date 对象\",\"link\":\"/js/stdlib/date.html\"},{\"text\":\"RegExp 对象\",\"link\":\"/js/stdlib/regexp.html\"},{\"text\":\"JSON 对象\",\"link\":\"/js/stdlib/json.html\"}]},{\"text\":\"面向对象编程\",\"collapsed\":false,\"items\":[{\"text\":\"实例对象与 new 命令\",\"link\":\"/js/oop/new.html\"},{\"text\":\"this 关键字\",\"link\":\"/js/oop/this.html\"},{\"text\":\"对象的继承\",\"link\":\"/js/oop/prototype.html\"},{\"text\":\"Object 对象的相关方法\",\"link\":\"/js/oop/object.html\"},{\"text\":\"严格模式\",\"link\":\"/js/oop/strict.html\"}]},{\"text\":\"异步操作\",\"collapsed\":false,\"items\":[{\"text\":\"概述\",\"link\":\"/js/async/general.html\"},{\"text\":\"定时器\",\"link\":\"/js/async/timer.html\"},{\"text\":\"Promise 对象\",\"link\":\"/js/async/promise.html\"}]},{\"text\":\"DOM\",\"collapsed\":false,\"items\":[{\"text\":\"概述\",\"link\":\"/js/dom/general.html\"},{\"text\":\"Node 接口\",\"link\":\"/js/dom/node.html\"},{\"text\":\"NodeList 接口，HTMLCollection 接口\",\"link\":\"/js/dom/nodelist.html\"},{\"text\":\"ParentNode 接口，ChildNode 接口\",\"link\":\"/js/dom/parentnode.html\"},{\"text\":\"Document 节点\",\"link\":\"/js/dom/document.html\"},{\"text\":\"Element 节点\",\"link\":\"/js/dom/element.html\"},{\"text\":\"属性的操作\",\"link\":\"/js/dom/attributes.html\"},{\"text\":\"Text 节点和 DocumentFragment 节点\",\"link\":\"/js/dom/text.html\"},{\"text\":\"CSS 操作\",\"link\":\"/js/dom/css.html\"},{\"text\":\"Mutation Observer API\",\"link\":\"/js/dom/mutationobserver.html\"}]},{\"text\":\"事件\",\"collapsed\":false,\"items\":[{\"text\":\"EventTarget 接口\",\"link\":\"/js/events/eventtarget.html\"},{\"text\":\"事件模型\",\"link\":\"/js/events/model.html\"},{\"text\":\"Event 对象\",\"link\":\"/js/events/event.html\"},{\"text\":\"鼠标事件\",\"link\":\"/js/events/mouse.html\"},{\"text\":\"键盘事件\",\"link\":\"/js/events/keyboard.html\"},{\"text\":\"进度事件\",\"link\":\"/js/events/progress.html\"},{\"text\":\"表单事件\",\"link\":\"/js/events/form.html\"},{\"text\":\"触摸事件\",\"link\":\"/js/events/touch.html\"},{\"text\":\"拖拉事件\",\"link\":\"/js/events/drag.html\"},{\"text\":\"其他常见事件\",\"link\":\"/js/events/common.html\"},{\"text\":\"GlobalEventHandlers 接口\",\"link\":\"/js/events/globaleventhandlers.html\"}]},{\"text\":\"浏览器模型\",\"collapsed\":false,\"items\":[{\"text\":\"浏览器模型概述\",\"link\":\"/js/bom/engine.html\"},{\"text\":\"window 对象\",\"link\":\"/js/bom/window.html\"},{\"text\":\"Navigator 对象，Screen 对象\",\"link\":\"/js/bom/navigator.html\"},{\"text\":\"Cookie\",\"link\":\"/js/bom/cookie.html\"},{\"text\":\"XMLHttpRequest 对象\",\"link\":\"/js/bom/xmlhttprequest.html\"},{\"text\":\"同源限制\",\"link\":\"/js/bom/same-origin.html\"},{\"text\":\"CORS 通信\",\"link\":\"/js/bom/cors.html\"},{\"text\":\"Storage 接口\",\"link\":\"/js/bom/storage.html\"},{\"text\":\"History 对象\",\"link\":\"/js/bom/history.html\"},{\"text\":\"Location 对象，URL 对象，URLSearchParams 对象\",\"link\":\"/js/bom/location.html\"},{\"text\":\"ArrayBuffer 对象，Blob 对象\",\"link\":\"/js/bom/arraybuffer.html\"},{\"text\":\"File 对象，FileList 对象，FileReader 对象\",\"link\":\"/js/bom/file.html\"},{\"text\":\"表单，FormData 对象\",\"link\":\"/js/bom/form.html\"},{\"text\":\"IndexedDB API\",\"link\":\"/js/bom/indexeddb.html\"},{\"text\":\"Web Worker\",\"link\":\"/js/bom/webworker.html\"}]},{\"text\":\"附录：网页元素接口\",\"collapsed\":false,\"items\":[{\"text\":\"&lt;a&gt;\",\"link\":\"/js/elements/a.html\"},{\"text\":\"&lt;img&gt;\",\"link\":\"/js/elements/image.html\"},{\"text\":\"&lt;form&gt;\",\"link\":\"/js/elements/form.html\"},{\"text\":\"&lt;input&gt;\",\"link\":\"/js/elements/input.html\"},{\"text\":\"&lt;button&gt;\",\"link\":\"/js/elements/button.html\"},{\"text\":\"&lt;option&gt;\",\"link\":\"/js/elements/option.html\"},{\"text\":\"&lt;video&gt;，&lt;audio&gt;\",\"link\":\"/js/elements/video.html\"}]}]},\"/es6\":{\"text\":\"ES6\",\"collapsed\":false,\"items\":[{\"text\":\"ECMAScript 6 简介\",\"link\":\"/es6/intro.html\"},{\"text\":\"let 和 const 命令\",\"link\":\"/es6/let.html\"},{\"text\":\"变量的解构赋值\",\"link\":\"/es6/destructuring.html\"},{\"text\":\"字符串的扩展\",\"link\":\"/es6/string.html\"},{\"text\":\"字符串的新增方法\",\"link\":\"/es6/string-methods.html\"},{\"text\":\"扩展\",\"collapsed\":false,\"items\":[{\"text\":\"正则的扩展\",\"link\":\"/es6/regex.html\"},{\"text\":\"数值的扩展\",\"link\":\"/es6/number.html\"},{\"text\":\"函数的扩展\",\"link\":\"/es6/function.html\"},{\"text\":\"数组的扩展\",\"link\":\"/es6/array.html\"},{\"text\":\"对象的扩展\",\"link\":\"/es6/object.html\"},{\"text\":\"对象的新增方法\",\"link\":\"/es6/object-methods.html\"},{\"text\":\"运算符的扩展\",\"link\":\"/es6/operator.html\"}]},{\"text\":\"Symbol/Proxy\",\"collapsed\":false,\"items\":[{\"text\":\"Symbol\",\"link\":\"/es6/symbol.html\"},{\"text\":\"Set 和 Map 数据结构\",\"link\":\"/es6/set-map.html\"},{\"text\":\"Proxy\",\"link\":\"/es6/proxy.html\"},{\"text\":\"Reflect\",\"link\":\"/es6/reflect.html\"}]},{\"text\":\"Promise/Generator\",\"collapsed\":false,\"items\":[{\"text\":\"Promise 对象\",\"link\":\"/es6/promise.html\"},{\"text\":\"Iterator 和 for...of 循环\",\"link\":\"/es6/iterator.html\"},{\"text\":\"Generator 函数的语法\",\"link\":\"/es6/generator.html\"},{\"text\":\"Generator 函数的异步应用\",\"link\":\"/es6/generator-async.html\"},{\"text\":\"async 函数\",\"link\":\"/es6/async.html\"}]},{\"text\":\"Class/Module\",\"collapsed\":false,\"items\":[{\"text\":\"Class 的基本语法\",\"link\":\"/es6/class.html\"},{\"text\":\"Class 的继承\",\"link\":\"/es6/class-extends.html\"},{\"text\":\"Module 的语法\",\"link\":\"/es6/module.html\"},{\"text\":\"Module 的加载实现\",\"link\":\"/es6/module-loader.html\"}]},{\"text\":\"编程风格\",\"collapsed\":false,\"items\":[{\"text\":\"编程风格\",\"link\":\"/es6/style.html\"},{\"text\":\"读懂规格\",\"link\":\"/es6/spec.html\"},{\"text\":\"异步遍历器\",\"link\":\"/es6/async-iterator.html\"},{\"text\":\"ArrayBuffer\",\"link\":\"/es6/arraybuffer.html\"}]},{\"text\":\"最新提案\",\"link\":\"/es6/proposals.html\"},{\"text\":\"Decorator\",\"link\":\"/es6/decorator.html\"},{\"text\":\"参考链接\",\"link\":\"/es6/reference.html\"}]}},\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2023 shangwenhe.github.io from  https://github.com/wangdoc/\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/shangwenhe/shangwenhe.github.io\"}],\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"zh\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\"}}}}}}}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>